# 에이전트 표준

## 버전: 2.1
## 최종 수정: 2026-02-13
## 승인자: PD 박세준
## 작성자: 김부장

---

## 개요

Project Sunshine 서브에이전트 역할 정의서입니다.
**단일 책임 원칙**에 따라 각 에이전트는 1개 작업만 수행합니다.

---

## v2.1 변경사항

| 항목 | v2.0 | v2.1 |
|------|------|------|
| Phase 2 | 이미지 | **텍스트** |
| Phase 3 | 텍스트 | **이미지** |
| 표지 | 한/영 분리 (2개) | **한영 통합 (1개)** |
| Cloudinary | 없음 | **노드 31 추가** |

---

## 에이전트 분류

| 분류 | 설명 | 자동화 |
|------|------|--------|
| 시스템 | 자동화된 처리 | ✅ 완전 자동 |
| 에이전트 | AI 기반 작업 | ⚠️ AI 판단 |
| PD승인 | 사람 확인 필요 | ❌ 수동 |

---

## Phase 구조

| Phase | 범위 | 노드 번호 |
|-------|------|-----------|
| Phase 1 | 기획 | 1 ~ 8 |
| Phase 2 | **텍스트** | 10 ~ 19 |
| Phase 3 | **이미지** | 20 ~ 29 |
| Phase 4 | 최종/게시 | 30 ~ 39 |

---

## 전체 에이전트 목록

| Phase | 노드 | 작업명 | 분류 |
|-------|------|--------|------|
| 1 | 1 | 규칙로드 | 시스템 |
| 1 | 2 | 노션시트검토 | 시스템 |
| 1 | 3 | 음식선정 | 에이전트 |
| 1 | 4 | 컨펌검토 | PD승인 |
| 1 | 5 | 데이터수집 | 에이전트 |
| 1 | 6 | 안전도분류 | 에이전트 |
| 1 | 7 | 팩트체크 | 에이전트 |
| 1 | 8-R | 규칙검수_기획 | 시스템 |
| 1 | 8-C | 크리에이티브검수_기획 | 에이전트 |
| 2 | 10 | 텍스트규칙로드 | 시스템 |
| 2 | 11 | 인스타캡션작성 | 에이전트 |
| 2 | 11-R | 규칙검수_인스타캡션 | 시스템 |
| 2 | 11-C | 크리에이티브검수_인스타캡션 | 에이전트 |
| 2 | 12 | 쓰레드캡션작성 | 에이전트 |
| 2 | 12-R | 규칙검수_쓰레드캡션 | 시스템 |
| 2 | 12-C | 크리에이티브검수_쓰레드캡션 | 에이전트 |
| 2 | 13 | 블로그본문작성 | 에이전트 |
| 2 | 13-R | 규칙검수_블로그본문 | 시스템 |
| 2 | 13-C | 크리에이티브검수_블로그본문 | 에이전트 |
| 3 | 20 | 이미지규칙로드 | 시스템 |
| 3 | 21 | 표지제작 | 에이전트 |
| 3 | 21-R | 규칙검수_표지 | 시스템 |
| 3 | 21-C | 크리에이티브검수_표지 | 에이전트 |
| 3 | 22 | 슬라이드제작 | 에이전트 |
| 3 | 22-R | 규칙검수_슬라이드 | 시스템 |
| 3 | 22-C | 크리에이티브검수_슬라이드 | 에이전트 |
| 3 | 23 | 블로그이미지제작 | 에이전트 |
| 3 | 23-R | 규칙검수_블로그이미지 | 시스템 |
| 3 | 23-C | 크리에이티브검수_블로그이미지 | 에이전트 |
| 3 | 24 | CTA제작 | 에이전트 |
| 3 | 24-R | 규칙검수_CTA | 시스템 |
| 3 | 24-C | 크리에이티브검수_CTA | 에이전트 |
| 4 | 30-R | 규칙검수_최종 | 시스템 |
| 4 | 30-C | 크리에이티브검수_최종 | 에이전트 |
| 4 | 31 | Cloudinary업로드 | 시스템 |
| 4 | 32 | 인스타게시 | 에이전트 |
| 4 | 33 | 쓰레드게시 | 에이전트 |
| 4 | 34 | 블로그게시 | 에이전트 |
| 4 | 35 | 동기화_시스템 | 시스템 |
| 4 | 36 | 알림_시스템 | 시스템 |

---

## PHASE 1: 기획 에이전트 (1~8)

### [1] 규칙로드 │ 시스템

**역할:** 콘텐츠 제작 관련 규칙 전체 로드

**입력:** 없음 (자동 시작)

**출력:**
- RULES.md 내용
- 안전도 템플릿
- 표준 문서 목록

**로드 대상:**
```
- RULES.md
- Cover Production Standard 1.0
- Blog Image Standard 1.1
- Thread Caption Standard 1.0
- 안전도별 템플릿 (SAFE/CAUTION/DANGER/FORBIDDEN)
```

---

### [2] 노션시트검토 │ 시스템

**역할:** 노션 데이터베이스에서 제작 현황 확인

**입력:** 노션 API 연결

**출력:**
- 기제작 음식 목록
- 미제작 음식 목록
- 제작 가능 후보

---

### [3] 음식선정 │ 에이전트

**역할:** 제작할 음식 후보 선택

**입력:** 미제작 음식 목록

**출력:** 선정된 음식 (1개 또는 다수)

---

### [4] 컨펌검토 │ PD승인

**역할:** 음식 선정 최종 승인

**입력:** 선정된 음식

**출력:**
- 승인 → [5] 진행
- 거부 → [3] 재선정

---

### [5] 데이터수집 │ 에이전트

**역할:** 음식 기초 데이터 수집

**입력:** 승인된 음식명

**출력:**
```json
{
  "name_ko": "사과",
  "name_en": "APPLE",
  "nutrients": ["비타민C", "식이섬유", "칼륨"],
  "benefits": ["면역력 강화", "소화 촉진"],
  "serving_size": "중간 크기 1/4개",
  "precautions": ["씨 제거 필수", "과다 섭취 주의"]
}
```

---

### [6] 안전도분류 │ 에이전트

**역할:** 안전도 분류 결정

**입력:** 수집된 데이터

**출력:** 안전도 레벨

| 레벨 | 기준 | 색상 코드 |
|------|------|-----------|
| SAFE | 안전하게 급여 가능 | #4CAF50 (녹색) |
| CAUTION | 조건부 급여 가능 | #FFD93D (노랑) |
| DANGER | 주의 필요, 소량만 | #FF6B6B (주황) |
| FORBIDDEN | 절대 급여 금지 | #FF5252 (빨강) |

---

### [7] 팩트체크 │ 에이전트

**역할:** 수집된 정보의 사실 확인

**입력:** 데이터 + 안전도

**출력:** 검증된 팩트 데이터

---

### [8-R] 규칙검수_기획 │ 시스템

**역할:** 기획 데이터 규칙 준수 자동 검증

**검증 항목:**
```
□ 필수 항목 모두 존재
□ 안전도 레벨 유효값
□ 급여량 형식 정확
□ 주의사항 1개 이상
```

---

### [8-C] 크리에이티브검수_기획 │ 에이전트

**역할:** 기획 품질 판단

**판단 기준:**
```
- 정보가 충분한가?
- 사용자에게 유용한가?
- 기획 방향이 적절한가?
```

---

## PHASE 2: 텍스트 에이전트 (10~19)

### [10] 텍스트규칙로드 │ 시스템

**역할:** 텍스트 작성 규칙 로드

**로드 대상:**
```
- 인스타 캡션 규칙 (파스타 스타일)
- Thread Caption Standard 1.0
- 블로그 본문 규칙
- 안전도별 톤 가이드
```

---

### [11] 인스타캡션작성 │ 에이전트

**역할:** 인스타그램 캡션 작성

**입력:** 음식 데이터, 안전도

**출력:** instagram_caption.txt

**적용 규칙:**
```
- 파스타 스타일 (정형화)
- 구조: 결론 → 주의사항 → 급여법 → CTA
- 해시태그 12-16개
- AI 고지 필수
- 안전도별 톤 분기
```

---

### [11-R] 규칙검수_인스타캡션 │ 시스템

**검증 항목:**
```
□ 해시태그 12-16개
□ AI 고지 포함
□ 안전도별 템플릿 일치
□ 금지 표현 없음
```

---

### [11-C] 크리에이티브검수_인스타캡션 │ 에이전트

**판단 기준:**
```
- 톤이 자연스러운가?
- 가독성 좋은가?
- 참여 유도 효과?
```

---

### [12] 쓰레드캡션작성 │ 에이전트

**역할:** 쓰레드 캡션 작성

**입력:** 음식 데이터, 안전도

**출력:** threads_caption.txt

**적용 규칙:** Thread Caption Standard 1.0
```
- 대화체 (친구한테 말하듯)
- 5-7줄
- 이모지 3개 이하
- 해시태그 없음
- AI 고지 필수
- 안전도별 톤 분기
- 햇살이 경험담 포함 (SAFE/CAUTION만)
```

---

### [12-R] 규칙검수_쓰레드캡션 │ 시스템

**검증 항목:**
```
□ 5-7줄 이내
□ 이모지 3개 이하
□ 해시태그 없음
□ AI 고지 포함
□ 안전도별 템플릿 일치
```

---

### [12-C] 크리에이티브검수_쓰레드캡션 │ 에이전트

**판단 기준:**
```
- 대화체 자연스러운가?
- 햇살이 경험담 적절한가?
- 참여 유도 (질문) 효과?
```

---

### [13] 블로그본문작성 │ 에이전트

**역할:** 블로그 본문 작성

**입력:** 음식 데이터, 안전도

**출력:** blog_caption.txt

**적용 규칙:**
```
- 구조: 서론 → 본론 → 결론
- SEO 키워드 포함
- AI 고지 필수
- 안전도별 톤 분기
```

---

### [13-R] 규칙검수_블로그본문 │ 시스템

**검증 항목:**
```
□ 구조 (서론/본론/결론)
□ AI 고지 포함
□ 최소 글자수 충족
□ SEO 키워드 포함
```

---

### [13-C] 크리에이티브검수_블로그본문 │ 에이전트

**판단 기준:**
```
- 정보 전달력 좋은가?
- 가독성 좋은가?
- SEO에 적합한가?
```

---

## PHASE 3: 이미지 에이전트 (20~29)

### [20] 이미지규칙로드 │ 시스템

**역할:** 이미지 제작 규칙 재확인

**로드 대상:**
```
- Cover Production Standard 1.0
- Blog Image Standard 1.1
- 8번 이미지: 베스트 > 크롭폴더만 사용
- CTA: 베스트 > 크롭폴더만 사용
- 해상도: 1080x1080
- 텍스트 내용 참조 (Phase 2 결과물)
```

---

### [21] 표지제작 │ 에이전트

**역할:** 인스타그램/블로그 표지 이미지 제작

**입력:** 음식명, 안전도

**출력:** (v2.1 변경)
```
- {foodname}_cover.png (한영 통합, 1개)
```

**적용 표준:** Cover Production Standard 1.0

**제작 규격:**
```
- 해상도: 1080x1080
- 텍스트: 한글 + 영문 함께 표시
- 예시: "당근" + "CARROT"
```

---

### [21-R] 규칙검수_표지 │ 시스템

**검증 항목:**
```
□ 해상도 1080x1080
□ 파일명 규칙 준수 ({foodname}_cover.png)
□ 한글 + 영문 모두 존재
□ 텍스트 위치 정확
□ 안전도 색상 코드 정확
```

---

### [21-C] 크리에이티브검수_표지 │ 에이전트

**판단 기준:**
```
- 시선을 끄는가?
- 브랜드 톤에 맞는가?
- 텍스트 가독성 좋은가?
```

---

### [22] 슬라이드제작 │ 에이전트

**역할:** 인스타그램 본문 슬라이드 제작

**입력:** 음식 데이터, 안전도, **텍스트 내용**

**출력:**
```
- {foodname}_slide_01.png ~ {foodname}_slide_0N.png
```

**특징:** 텍스트 내용 기반으로 슬라이드 방향 결정

---

### [22-R] 규칙검수_슬라이드 │ 시스템

**검증 항목:**
```
□ 해상도 1080x1080
□ 안전도별 색상 코드
□ 텍스트 가독성 (폰트 크기)
□ 정보 누락 없음
```

---

### [22-C] 크리에이티브검수_슬라이드 │ 에이전트

**판단 기준:**
```
- 정보 전달이 명확한가?
- 시각적 균형이 좋은가?
- 텍스트와 정합성 있는가?
```

---

### [23] 블로그이미지제작 │ 에이전트

**역할:** 블로그 본문 이미지 제작

**입력:** 음식 데이터, 안전도, **블로그 본문**

**출력:**
```
- blog_01.png: 표지 (21번에서 완료)
- blog_02.png: 음식 원물 이미지 (AI 생성 또는 스톡)
- blog_03.png ~ blog_07.png: 슬라이드
- blog_08.png: 햇살이 이미지 (베스트 > 크롭폴더)
```

**blog_02.png 제작 규칙:**
```
- NATURAL 유형: AI 프롬프트 생성
- PRODUCT/COOKED 유형: 스톡 이미지 사용
- 참조: Food Prompt Guide v1.0
```

---

### [23-R] 규칙검수_블로그이미지 │ 시스템

**검증 항목:**
```
□ 해상도 1080x1080
□ 파일명 blog_01 ~ blog_08
□ 톤 통일 (따뜻한 톤)
□ 8번 이미지 소스 경로 확인
```

---

### [23-C] 크리에이티브검수_블로그이미지 │ 에이전트

**판단 기준:**
```
- 이미지 품질 좋은가?
- 톤 일관성 있는가?
- 블로그 본문과 정합성 있는가?
```

---

### [24] CTA제작 │ 에이전트

**역할:** 인스타그램 CTA 슬라이드 제작

**입력:** 없음 (햇살이 이미지 선정)

**출력:**
```
- {foodname}_cta.png
```

**선정 규칙:**
```
- 소스: 선샤인 포토 > 베스트 > 크롭폴더
- 햇살이 표정: 밝고 친근한 것
```

---

### [24-R] 규칙검수_CTA │ 시스템

**검증 항목:**
```
□ 해상도 1080x1080
□ 소스 경로 확인 (크롭폴더)
□ 파일명 규칙 준수
```

---

### [24-C] 크리에이티브검수_CTA │ 에이전트

**판단 기준:**
```
- 햇살이 표정이 적절한가?
- CTA 느낌이 나는가?
```

---

## PHASE 4: 최종/게시 에이전트 (30~39)

### [30-R] 규칙검수_최종 │ 시스템

**역할:** 전체 결과물 규칙 통합 검증

**검증 항목:**
```
□ 모든 파일 존재
□ 파일명 규칙 전체 준수
□ 필수 항목 누락 없음
□ 이미지-텍스트 매칭
```

---

### [30-C] 크리에이티브검수_최종 │ 에이전트

**역할:** 전체 품질 최종 판단

**판단 기준:**
```
- 텍스트 + 이미지 정합성
- 전체 품질 수준
- 게시 준비 완료 여부
```

---

### [31] Cloudinary업로드 │ 시스템 (신규)

**역할:** 검수 통과 이미지 CDN 업로드

**입력:** 검수 통과 이미지 파일

**출력:** Cloudinary CDN URL

**업로드 대상:**
```
- 표지: {foodname}_cover.png
- 슬라이드: {foodname}_slide_01~0N.png
- 블로그 이미지: blog_01~08.png
- CTA: {foodname}_cta.png
```

**규칙:**
```
- 중복 체크 (파일명 + 해시)
- 중복 시 업로드 스킵, 기존 URL 반환
```

---

### [32] 인스타게시 │ 에이전트

**역할:** 인스타그램 게시

**입력:** Cloudinary URL + 캡션

**출력:** 게시 URL

**게시 방식:**
```
- Instagram Graph API
- 캐러셀 형태
- Business Account: 17841478336612378
```

---

### [33] 쓰레드게시 │ 에이전트

**역할:** 쓰레드 게시

**입력:** 이미지 + 캡션

**출력:** 게시 URL

---

### [34] 블로그게시 │ 에이전트

**역할:** 블로그 게시

**입력:** 이미지 + 본문

**출력:** 게시 URL

---

### [35] 동기화_시스템 │ 시스템

**역할:** 게시 후 동기화

**동기화 항목:**
```
- 노션 ↔ 로컬 폴더
- 상태 업데이트
- 게시 URL 기록
- Cloudinary URL 기록
- 완료 시간 기록
```

---

### [36] 알림_시스템 │ 시스템

**역할:** 텔레그램 알림 발송

**알림 유형:**
```
- 완료: 게시 URL + Cloudinary 업로드 수
- 에러: 에러 구간 + 원인 + 조치
```

**텔레그램 봇:** @JunTrans_bot

---

## 에러 처리 규칙

### 규칙 검수 (R) 실패 시

```
1. 에러 원인 기록
2. 해당 제작 노드로 자동 재작업
3. 재작업 후 다시 규칙 검수
4. 3회 실패 시 수동 확인 요청
```

### 크리에이티브 검수 (C) 실패 시

```
1. 피드백 내용 기록
2. 해당 제작 노드로 피드백 전달
3. 피드백 반영하여 재작업
4. 3회 실패 시 수동 확인 요청
```

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2026-02-12 | 초기 버전 (6명 구조) |
| 2.0 | 2026-02-13 | 단일 책임 원칙 적용, Phase별 분리 |
| 2.1 | 2026-02-13 | 텍스트→이미지 순서 변경, 표지 통합, Cloudinary 추가 |
