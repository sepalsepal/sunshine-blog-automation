# Project Sunshine Pipeline Standard v2.7

**버전:** 2.7
**승인일:** 2026-02-13
**승인자:** PD 박세준
**작성자:** 김부장

---

## 개요

Project Sunshine 콘텐츠 제작 파이프라인 표준 문서입니다.
각 노드는 **단일 책임 원칙**에 따라 1개 작업만 수행합니다.

---

## v2.7 주요 변경사항

| 항목 | v2.6 | v2.7 |
|------|------|------|
| Phase 순서 | 텍스트 → 이미지 | 유지 |
| 표지 버전 | 한영 통합 (1개) | 유지 |
| Cloudinary | 검수 통과 후 업로드 | 유지 |
| **잔여작업알림** | 없음 | **노드 37 추가** |

---

## v2.6 주요 변경사항 (이전)

| 항목 | v2.5 | v2.6 |
|------|------|------|
| Phase 순서 | 이미지 → 텍스트 | **텍스트 → 이미지** |
| 표지 버전 | 한/영 분리 (2개) | **한영 통합 (1개)** |
| Cloudinary | 없음 | **검수 통과 후 업로드** |

---

## Phase 구조

| Phase | 범위 | 노드 번호 |
|-------|------|-----------|
| Phase 1 | 기획 | 1 ~ 8 |
| Phase 2 | 텍스트 | 10 ~ 19 |
| Phase 3 | 이미지 | 20 ~ 29 |
| Phase 4 | 최종/게시 | 30 ~ 39 |

---

## 검수 체계

| 구분 | 코드 | 담당 | 방식 |
|------|------|------|------|
| 규칙 검수 | R | 시스템 | 자동화 (Validator) |
| 크리에이티브 검수 | C | 에이전트 | AI 판단 |

---

## PHASE 1: 기획 (1~8)

```
[1] 규칙 로드 │ 시스템
    │ - RULES.md 로드
    │ - 안전도 템플릿 로드
    │ - 표준 문서 로드
    ↓
[2] 노션 시트 검토 │ 시스템
    │ - 기제작 음식 서치
    │ - 미제작 음식 서치
    ↓
[3] 음식 선정 │ 음식선정
    │ - 후보 음식 선택
    ↓
[4] 컨펌 │ 컨펌검토
    │ - 승인 → [5]
    │ - 실패 → [3] 재선정
    ↓
[5] 음식 기초 데이터 수집 │ 데이터수집
    │ - 영양 정보
    │ - 효능/효과
    │ - 기본 급여량
    ↓
[6] 안전도 분류 │ 안전도분류
    │ - SAFE: 안전
    │ - CAUTION: 주의
    │ - DANGER: 위험
    │ - FORBIDDEN: 금지
    ↓
[7] 팩트 체크 │ 팩트체크
    │ - 급여량 검증
    │ - 주의사항 확인
    │ - 출처 확인
    ↓
[8-R] 규칙 검수 │ 규칙검수_기획
    │ - 데이터 완성도 체크
    │ - 필수 항목 누락 확인
    │ - ✅ → [8-C] / ❌ → [5]~[7] 재작업
    ↓
[8-C] 크리에이티브 검수 │ 크리에이티브검수_기획
    │ - 정보 품질 판단
    │ - 기획 방향성 확인
    │ - ✅ → [10] / ❌ → [5]~[7] 재작업
```

---

## PHASE 2: 텍스트 (10~19)

```
[10] 텍스트 규칙 확인 │ 텍스트규칙로드
    │ - 인스타 캡션 규칙 (파스타 스타일)
    │ - Thread Caption Standard 1.0
    │ - 블로그 본문 규칙
    │ - 안전도별 톤 가이드
    ↓
[11] 인스타 캡션 작성 │ 인스타캡션작성
    │ - 파스타 스타일 적용
    │ - 안전도별 톤 분기
    │ - AI 고지 필수
    ↓
[11-R] 규칙 검수 │ 규칙검수_인스타캡션
    │ - 해시태그 12-16개
    │ - AI 고지 포함
    │ - 안전도별 템플릿 일치
    ↓
[11-C] 크리에이티브 검수 │ 크리에이티브검수_인스타캡션
    │ - 톤 자연스러움
    │ - 가독성, 참여 유도
    ↓
[12] 쓰레드 캡션 작성 │ 쓰레드캡션작성
    │ - Thread Caption Standard 1.0 적용
    │ - 안전도별 톤 분기
    │ - AI 고지 필수
    ↓
[12-R] 규칙 검수 │ 규칙검수_쓰레드캡션
    │ - 5-7줄 이내
    │ - 이모지 3개 이하
    │ - 해시태그 없음
    ↓
[12-C] 크리에이티브 검수 │ 크리에이티브검수_쓰레드캡션
    │ - 대화체 자연스러움
    │ - 햇살이 경험담 적절성
    ↓
[13] 블로그 본문 작성 │ 블로그본문작성
    │ - 블로그 표준 적용
    │ - 안전도별 톤 분기
    │ - SEO 고려
    ↓
[13-R] 규칙 검수 │ 규칙검수_블로그본문
    │ - 구조 (서론/본론/결론)
    │ - AI 고지 포함
    │ - 최소 글자수
    ↓
[13-C] 크리에이티브 검수 │ 크리에이티브검수_블로그본문
    │ - 정보 전달력
    │ - 가독성, SEO 적합성
```

---

## PHASE 3: 이미지 (20~29)

```
[20] 이미지 규칙 확인 │ 이미지규칙로드
    │ - Cover Production Standard 1.0 로드
    │ - Blog Image Standard 1.1 로드
    │ - 8번 이미지: 베스트 > 크롭폴더만 사용
    │ - CTA: 베스트 > 크롭폴더만 사용
    │ - 텍스트 내용 참조 (Phase 2 결과물)
    ↓
[21] 표지 제작 │ 표지제작
    │ - 한영 통합 버전 (1개)
    │ - 1080x1080 규격
    │ - 출력: {foodname}_cover.png
    ↓
[21-R] 규칙 검수 │ 규칙검수_표지
    │ - 해상도 확인 (1080x1080)
    │ - 파일명 규칙 확인
    │ - 한글 + 영문 모두 존재
    ↓
[21-C] 크리에이티브 검수 │ 크리에이티브검수_표지
    │ - 구도 판단
    │ - 색감/톤 확인
    │ - 브랜드 일관성
    ↓
[22] 슬라이드 제작 │ 슬라이드제작
    │ - 인포그래픽 슬라이드
    │ - 안전도별 템플릿 적용
    │ - 텍스트 내용 기반 제작
    ↓
[22-R] 규칙 검수 │ 규칙검수_슬라이드
    │ - 해상도 확인
    │ - 안전도별 색상 코드 확인
    │ - 텍스트 가독성
    ↓
[22-C] 크리에이티브 검수 │ 크리에이티브검수_슬라이드
    │ - 정보 전달력
    │ - 시각적 균형
    │ - 텍스트와 정합성
    ↓
[23] 블로그 이미지 제작 │ 블로그이미지제작
    │ - 1번: 표지 (21번에서 완료)
    │ - 2번: 음식 이미지 (프롬프트 생성 or 스톡)
    │ - 3~7번: 슬라이드
    │ - 8번: 베스트 > 크롭폴더에서 선정
    ↓
[23-R] 규칙 검수 │ 규칙검수_블로그이미지
    │ - 해상도 확인 (1080x1080)
    │ - 파일명 규칙 확인
    │ - 톤 통일 확인
    ↓
[23-C] 크리에이티브 검수 │ 크리에이티브검수_블로그이미지
    │ - 이미지 품질
    │ - 톤 일관성
    │ - 블로그 본문과 정합성
    ↓
[24] CTA 이미지 제작 │ CTA제작
    │ - 베스트 > 크롭폴더에서 선정
    │ - 햇살이 이미지 사용
    ↓
[24-R] 규칙 검수 │ 규칙검수_CTA
    │ - 해상도 확인
    │ - 소스 경로 확인 (크롭폴더)
    ↓
[24-C] 크리에이티브 검수 │ 크리에이티브검수_CTA
    │ - 햇살이 표정/포즈 적합성
    │ - CTA 메시지와 어울림
```

---

## PHASE 4: 최종/게시 (30~39)

```
[30-R] 최종 규칙 검수 │ 규칙검수_최종
    │ - 전체 파일 존재 확인
    │ - 파일명 규칙 전체 확인
    │ - 필수 항목 누락 확인
    ↓
[30-C] 최종 크리에이티브 검수 │ 크리에이티브검수_최종
    │ - 텍스트 + 이미지 정합성
    │ - 전체 품질 판단
    │ - 게시 준비 완료 확인
    ↓
[31] Cloudinary 업로드 │ Cloudinary업로드
    │ - 검수 통과 이미지 업로드
    │ - 중복 체크 후 업로드
    │ - CDN URL 획득
    ↓
[32] 인스타 게시 │ 인스타게시
    │ - Instagram Graph API
    │ - 캐러셀 게시
    ↓
[33] 쓰레드 게시 │ 쓰레드게시
    │ - 수동 또는 API
    │ - 이미지 + 캡션 게시
    ↓
[34] 블로그 게시 │ 블로그게시
    │ - 네이버 블로그 또는 티스토리
    │ - 본문 + 이미지 게시
    ↓
[35] 동기화 │ 동기화_시스템
    │ - 노션 ↔ 로컬 동기화
    │ - 게시 URL 기록
    │ - Cloudinary URL 기록
    │ - 상태 업데이트
    ↓
[36] 알림 │ 알림_시스템
    │ - 텔레그램 완료 알림
    │ - 에러 시 에러 알림
    ↓
[37] 잔여작업알림 │ 잔여작업알림_시스템
    │ - 미완료 항목 목록
    │ - UNKNOWN/에러 현황
    │ - 다음 작업 제안
    │ - 텔레그램 알림 발송
    ↓
✅ 완료
```

---

## 노드 전체 목록

| Phase | 노드 | 작업명 | 유형 |
|-------|------|--------|------|
| 1 | 1 | 규칙로드 | 시스템 |
| 1 | 2 | 노션시트검토 | 시스템 |
| 1 | 3 | 음식선정 | 에이전트 |
| 1 | 4 | 컨펌검토 | PD승인 |
| 1 | 5 | 데이터수집 | 에이전트 |
| 1 | 6 | 안전도분류 | 에이전트 |
| 1 | 7 | 팩트체크 | 에이전트 |
| 1 | 8-R | 규칙검수_기획 | 시스템 |
| 1 | 8-C | 크리에이티브검수_기획 | 에이전트 |
| 2 | 10 | 텍스트규칙로드 | 시스템 |
| 2 | 11 | 인스타캡션작성 | 에이전트 |
| 2 | 11-R | 규칙검수_인스타캡션 | 시스템 |
| 2 | 11-C | 크리에이티브검수_인스타캡션 | 에이전트 |
| 2 | 12 | 쓰레드캡션작성 | 에이전트 |
| 2 | 12-R | 규칙검수_쓰레드캡션 | 시스템 |
| 2 | 12-C | 크리에이티브검수_쓰레드캡션 | 에이전트 |
| 2 | 13 | 블로그본문작성 | 에이전트 |
| 2 | 13-R | 규칙검수_블로그본문 | 시스템 |
| 2 | 13-C | 크리에이티브검수_블로그본문 | 에이전트 |
| 3 | 20 | 이미지규칙로드 | 시스템 |
| 3 | 21 | 표지제작 | 에이전트 |
| 3 | 21-R | 규칙검수_표지 | 시스템 |
| 3 | 21-C | 크리에이티브검수_표지 | 에이전트 |
| 3 | 22 | 슬라이드제작 | 에이전트 |
| 3 | 22-R | 규칙검수_슬라이드 | 시스템 |
| 3 | 22-C | 크리에이티브검수_슬라이드 | 에이전트 |
| 3 | 23 | 블로그이미지제작 | 에이전트 |
| 3 | 23-R | 규칙검수_블로그이미지 | 시스템 |
| 3 | 23-C | 크리에이티브검수_블로그이미지 | 에이전트 |
| 3 | 24 | CTA제작 | 에이전트 |
| 3 | 24-R | 규칙검수_CTA | 시스템 |
| 3 | 24-C | 크리에이티브검수_CTA | 에이전트 |
| 4 | 30-R | 규칙검수_최종 | 시스템 |
| 4 | 30-C | 크리에이티브검수_최종 | 에이전트 |
| 4 | 31 | Cloudinary업로드 | 시스템 |
| 4 | 32 | 인스타게시 | 에이전트 |
| 4 | 33 | 쓰레드게시 | 에이전트 |
| 4 | 34 | 블로그게시 | 에이전트 |
| 4 | 35 | 동기화_시스템 | 시스템 |
| 4 | 36 | 알림_시스템 | 시스템 |
| 4 | 37 | 잔여작업알림_시스템 | 시스템 |

---

## 표지 규격 (v2.6 변경)

### 기존 (v2.5)
```
- {foodname}_cover_ko.png (한국어)
- {foodname}_cover_en.png (영어)
→ 2개 파일
```

### 변경 (v2.6)
```
- {foodname}_cover.png (한영 통합)
→ 1개 파일

예시: carrot_cover.png
내용: "당근" + "CARROT" 함께 표시
```

---

## Cloudinary 업로드 규칙

### 업로드 시점
```
[30-C] 최종 크리에이티브 검수 ✅ 통과 후
    ↓
[31] Cloudinary 업로드
```

### 업로드 대상
```
- 표지: {foodname}_cover.png
- 슬라이드: {foodname}_slide_01~0N.png
- 블로그 이미지: blog_01~08.png
- CTA: {foodname}_cta.png
```

### 중복 체크
```
1. 파일명 + 해시 비교
2. 중복 시 업로드 스킵
3. 기존 URL 반환
```

### 향후 추가 기능 (2차 개발)
```
- 자동 백업 폴더 생성
- 중복 항목 정리 (백업 후 삭제)
- 미사용 파일 정리
```

---

## 텍스트 → 이미지 순서 변경 이유

```
텍스트 먼저 확정
    ↓
텍스트 내용 기반으로 이미지 방향 결정
    ↓
텍스트와 이미지 정합성 ↑
    ↓
재작업 가능성 ↓
```

**예시:**
```
텍스트: "당근은 눈 건강에 특히 좋아요"
    ↓
슬라이드: "눈 건강" 강조 비주얼 제작
    ↓
정합성 유지
```

---

### 잔여 작업 알림 (신규)
```
📋 [잔여 작업 현황]

미완료: {N}건
- UNKNOWN {N}개 (food_data 추가 필요)
- 표지 미생성 {N}개
- CTA 미선정 {N}개
- 에러 {N}건

다음 작업 제안:
1. {작업1}
2. {작업2}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 에러 보고 체계

### 에러 보고서 형식

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚨 에러 보고서
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

콘텐츠: {음식명}
발생 시각: {YYYY-MM-DD HH:MM:SS}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[1] 에러 발생 구간
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase: {Phase 번호}
노드: {노드 번호} {작업명}
유형: {규칙검수 R / 크리에이티브검수 C}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[2] 에러 원인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
위반 규칙: {규칙명}
상세: {에러 상세 설명}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[3] 해결책
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
조치: {재작업 대상 노드}
방법: {해결 방법}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[4] 자동 조치
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
☐ 자동 재작업 실행
☐ 재검수 대기
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 텔레그램 알림 형식

### 성공 시
```
✅ [{음식명}] 게시 완료

- 인스타: {URL}
- 쓰레드: {URL}
- 블로그: {URL}

Cloudinary: {업로드 완료 파일 수}개

소요 시간: {MM분 SS초}
```

### 에러 시
```
🚨 [{음식명}] 에러 발생

- Phase: {Phase 번호}
- 구간: {노드 번호} {작업명}
- 원인: {에러 원인 요약}
- 조치: {자동 재작업 중 / 수동 확인 필요}
```

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2026-01-23 | 초기 버전 |
| 2.0 | 2026-02-12 | 서브에이전트 6명 구조 |
| 2.2 | 2026-02-13 | 단일 책임 원칙 적용 |
| 2.3 | 2026-02-13 | 단계별 검수 추가 |
| 2.4 | 2026-02-13 | 직관적 노드명 |
| 2.5 | 2026-02-13 | 텍스트/게시 분리, Phase별 번호 |
| 2.6 | 2026-02-13 | 텍스트→이미지 순서 변경, 표지 통합, Cloudinary 추가 |
| 2.7 | 2026-02-13 | 잔여작업알림 노드 추가 (노드 37) |

---

**문서 끝**
