# /batch - 플랫폼별 배치 처리

대량 콘텐츠를 플랫폼별로 일괄 처리합니다.

## 문법

```
/batch [플랫폼] [작업] [대상]
```

## 플랫폼

| 플랫폼 | 설명 | 이미지 | 캡션 |
|--------|------|--------|------|
| `insta` | 인스타그램 | 캐러셀 (표지+슬라이드) | 파스타 구조 |
| `threads` | 쓰레드 | **인스타와 공유** | 짧은 버전 |
| `blog` | 네이버 블로그 | 별도 (§8 v2.0) | HTML |

## 작업

| 작업 | 설명 | insta | threads | blog |
|------|------|-------|---------|------|
| `cover` | 표지 생성 | ✅ | ❌ (공유) | ✅ |
| `body` | 본문 생성 | ✅ | ❌ (공유) | ✅ |
| `caption` | 캡션 작성 | ✅ | ✅ | ✅ |
| `pipeline` | 전체 (표지+본문+캡션) | ✅ | ❌ | ✅ |
| `publish` | 게시 | ✅ | ✅ | ✅ |
| `validate` | 검증 | ✅ | ✅ | ✅ |

※ 쓰레드는 인스타 이미지를 공유하므로 cover/body/pipeline 불가

## 대상 지정

| 방식 | 예시 | 의미 |
|------|------|------|
| 범위 | `001-010` | 001부터 010까지 (10개) |
| 목록 | `001,005,009` | 지정된 3개만 |
| 폴더 | `3_approved` | 해당 폴더 전체 |
| 전체 | `all` | 작업 가능한 전체 |

## 예시

```bash
# 인스타그램
/batch insta cover 060-070      # 인스타 표지 11개
/batch insta body 060-070       # 인스타 본문 11개
/batch insta caption 060-070    # 인스타 캡션 11개
/batch insta pipeline 060       # 060 전체 (표지+본문+캡션)
/batch insta publish 3_approved # 승인된 전체 게시

# 쓰레드
/batch threads caption 060-070  # 쓰레드 캡션 (짧은 버전)
/batch threads publish 060-070  # 쓰레드 게시

# 블로그
/batch blog cover 060-070       # 블로그 표지 (§8 v2.0)
/batch blog body 060-070        # 블로그 본문 HTML
/batch blog pipeline 001-150    # 블로그 전체 150개

# 검증
/batch insta validate 3_approved  # 인스타 검증
/batch blog validate all          # 블로그 전체 검증
```

## 실행 흐름

### 1. 인자 파싱
- 플랫폼, 작업, 대상 추출
- 플랫폼별 작업 가능 여부 확인

### 2. 대상 콘텐츠 목록 생성
- 범위/목록/폴더/전체 파싱
- 유효한 콘텐츠만 필터링

### 3. 대량 작업 확인
- **10개 초과 시 확인 메시지**
- PD 승인 후 진행

### 4. 순차 실행
- 각 콘텐츠에 대해 작업 실행
- FAIL 시 해당 콘텐츠 스킵, 다음으로
- 로그 기록

### 5. 요약 보고
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 /batch 완료 보고
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
플랫폼: {insta/threads/blog}
작업: {cover/body/caption/pipeline}
대상: {범위/개수}

결과:
✅ 성공: {N}개
❌ 실패: {N}개
⏭️ 스킵: {N}개

실패 목록:
- 060: 표지 Validator FAIL
- 065: 캡션 파일 없음
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 에러 처리

| 에러 | 메시지 |
|------|--------|
| 플랫폼 오류 | "지원하지 않는 플랫폼: {입력}" |
| 쓰레드 cover/body | "쓰레드는 인스타 이미지 공유. cover/body 불필요" |
| 대상 없음 | "해당 콘텐츠를 찾을 수 없음: {대상}" |
| 인자 부족 | "사용법: /batch [플랫폼] [작업] [대상]" |

## 스크립트 연동

```bash
python3 scripts/batch_runner.py [플랫폼] [작업] [대상]
```

## 플랫폼별 상세 규칙

- 인스타: → batch-insta.md 참조
- 쓰레드: → batch-threads.md 참조
- 블로그: → batch-blog.md 참조
