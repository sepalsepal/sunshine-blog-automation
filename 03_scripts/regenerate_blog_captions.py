#!/usr/bin/env python3
"""
regenerate_blog_captions.py - ë¸”ë¡œê·¸ ìº¡ì…˜ ì¬ìƒì„±
ì˜ëª»ëœ ìŒì‹ëª…ì´ í¬í•¨ëœ ìº¡ì…˜ì„ ì˜¬ë°”ë¥¸ ë°ì´í„°ë¡œ ì¬ìƒì„±í•©ë‹ˆë‹¤.
"""

import json
import sys
from pathlib import Path

PROJECT_ROOT = Path(__file__).parent.parent
CONTENTS_DIR = PROJECT_ROOT / "01_contents"
FOOD_DATA_PATH = PROJECT_ROOT / "config" / "food_data.json"


# ì•ˆì „ë„ë³„ ì•„ì´ì½˜
SAFETY_ICONS = {
    "SAFE": "ğŸŸ¢",
    "CAUTION": "ğŸŸ¡",
    "DANGER": "ğŸŸ ",
    "FORBIDDEN": "â›”"
}


def get_blog_caption_template_safe(name: str, data: dict) -> str:
    """SAFE ë“±ê¸‰ ë¸”ë¡œê·¸ ìº¡ì…˜ í…œí”Œë¦¿"""
    nutrients = data.get("nutrients", [])
    dosages = data.get("dosages", {})
    do_items = data.get("do_items", [])
    dont_items = data.get("dont_items", [])
    precautions = data.get("precautions", [])
    cooking_steps = data.get("cooking_steps", [])

    # ì˜ì–‘ì†Œ í¬ë§·íŒ…
    nutrient_lines = []
    for n in nutrients[:4]:
        nutrient_lines.append(f"- {n['name']}: {n['value']}{n['unit']} ({n['benefit']})")
    nutrients_text = "\n".join(nutrient_lines)

    # ê¸‰ì—¬ëŸ‰ í¬ë§·íŒ… - í‘œì¤€ í˜•ì‹ ì‚¬ìš©
    dosage_lines = []
    for size in ["ì†Œí˜•ê²¬", "ì¤‘í˜•ê²¬", "ëŒ€í˜•ê²¬", "ì´ˆëŒ€í˜•ê²¬"]:
        if size in dosages:
            d = dosages[size]
            dosage_lines.append(format_dosage_line(size, d['weight'], d['amount'], d['desc']))
    dosages_text = "\n".join(dosage_lines)

    # ì£¼ì˜ì‚¬í•­ í¬ë§·íŒ…
    precaution_lines = []
    for p in precautions[:4]:
        precaution_lines.append(f"âš ï¸ {p['title']}: {p['desc']}")
    precautions_text = "\n".join(precaution_lines)

    # ì¡°ë¦¬ë°©ë²• í¬ë§·íŒ…
    cooking_lines = []
    for i, step in enumerate(cooking_steps[:5], 1):
        cooking_lines.append(f"{i}. {step['desc']}")
    cooking_text = "\n".join(cooking_lines)

    return f"""[ì´ë¯¸ì§€ 1ë²ˆ: í‘œì§€]

ì•ˆë…•í•˜ì„¸ìš”, 11ì‚´ ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ í–‡ì‚´ì´ ì—„ë§ˆì˜ˆìš”.

ì˜¤ëŠ˜ì€ ë§ì€ ë¶„ë“¤ì´ ê¶ê¸ˆí•´í•˜ì‹œëŠ” '{name}' ê¸‰ì—¬ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¼ê²Œìš”.
ìš°ë¦¬ í–‡ì‚´ì´ë„ {name}ì„ ì •ë§ ì¢‹ì•„í•˜ëŠ”ë°ìš”, ì²˜ìŒ ì¤¬ì„ ë•Œ ë°˜ì‘ì´ ì•„ì§ë„ ê¸°ì–µë‚˜ìš”!

[ì´ë¯¸ì§€ 2ë²ˆ: ìŒì‹ ì‚¬ì§„]


## ê°•ì•„ì§€ {name}, ë¨¹ì–´ë„ ë˜ë‚˜ìš”?

ğŸŸ¢ ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, SAFE ë“±ê¸‰ì´ì—ìš”.

{name}ì—ëŠ” ë‹¤ì–‘í•œ ì˜ì–‘ì†Œê°€ ë“¤ì–´ìˆì–´ìš”:
{nutrients_text}


[ì´ë¯¸ì§€ 3ë²ˆ: DogWithFood - í–‡ì‚´ì´ê°€ ë³´í˜¸ìì˜ ì¡°ë¦¬ ê³¼ì •ì„ ì§€ì¼œë³´ëŠ” ëª¨ìŠµ]

ìš°ë¦¬ í–‡ì‚´ì´ëŠ” ì œê°€ {name} ì†ì§ˆí•  ë•Œë§ˆë‹¤ ì˜†ì— ì™€ì„œ ì§€ì¼œë´ìš”. "ì—„ë§ˆ, ê·¸ê±° ë‚˜ ì£¼ëŠ” ê±°ì§€?" í•˜ëŠ” ëˆˆë¹›ìœ¼ë¡œìš”. 11ë…„ì„ í•¨ê»˜í•´ë„ ê°„ì‹ ì•ì—ì„œëŠ” ì—¬ì „íˆ ì•„ê¸° ê°•ì•„ì§€ ê°™ì•„ìš”.

{name} ê¸‰ì—¬ ì „ì—ëŠ” ê¼­ ê¹¨ë—ì´ ì”»ê³ , ê°•ì•„ì§€ì—ê²Œ ë§ê²Œ ì†ì§ˆí•´ì£¼ì„¸ìš”. ì €ë„ í–‡ì‚´ì´ ì£¼ê¸° ì „ì— í•­ìƒ í•œ ë²ˆ ë” í™•ì¸í•´ìš”.


## ì–´ë–»ê²Œ ê¸‰ì—¬í•˜ë©´ ì¢‹ì„ê¹Œìš”?

{name}ì„ ê¸‰ì—¬í•  ë•ŒëŠ” ëª‡ ê°€ì§€ ì£¼ì˜ì‚¬í•­ì´ ìˆì–´ìš”.

[ì´ë¯¸ì§€ 4ë²ˆ: ê¸‰ì—¬ë°©ë²• ì¸í¬ê·¸ë˜í”½]


## ì²´ì¤‘ë³„ ê¸‰ì—¬ëŸ‰

ìš°ë¦¬ ì•„ì´ ì²´ì¤‘ì— ë§ëŠ” ì ì •ëŸ‰ì„ í™•ì¸í•´ì£¼ì„¸ìš”:

{dosages_text}

[ì´ë¯¸ì§€ 5ë²ˆ: ê¸‰ì—¬ëŸ‰ ì¸í¬ê·¸ë˜í”½]


## ì£¼ì˜ì‚¬í•­

ì•ˆì „í•˜ê²Œ ê¸‰ì—¬í•˜ê¸° ìœ„í•´ ê¼­ í™•ì¸í•´ì£¼ì„¸ìš”!

{precautions_text}

[ì´ë¯¸ì§€ 6ë²ˆ: ì£¼ì˜ì‚¬í•­ ì¸í¬ê·¸ë˜í”½]

ì €ë„ ì²˜ìŒì—” 'ì´ê±° ì¤˜ë„ ë˜ë‚˜?' ê³ ë¯¼ ë§ì´ í–ˆì–´ìš”. ì¸í„°ë„·ì— ì •ë³´ê°€ ë„ˆë¬´ ë§ì•„ì„œ í—·ê°ˆë¦¬ë”ë¼ê³ ìš”. ì§ì ‘ ìˆ˜ì˜ì‚¬ ìƒë‹´ë„ ë°›ê³ , í–‡ì‚´ì´í•œí…Œ ì¡°ê¸ˆì”© ë¨¹ì—¬ë³´ë©´ì„œ ì •ë¦¬í•œ ë‚´ìš©ì´ì—ìš”.

ì¤‘ìš”í•œ ê±´ ì–´ë–¤ ìŒì‹ì´ë“  'ì²˜ìŒì—” ì†ŒëŸ‰, ë°˜ì‘ í™•ì¸ í›„ ëŠ˜ë¦¬ê¸°'ì˜ˆìš”. ìš°ë¦¬ ì•„ì´ë“¤ ì²´ì§ˆì´ ë‹¤ ë‹¤ë¥´ë‹ˆê¹Œìš”.


## ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

**Q. {name} ë§¤ì¼ ì¤˜ë„ ë˜ë‚˜ìš”?**
A. ë§¤ì¼ ê¸‰ì—¬ëŠ” ê¶Œì¥í•˜ì§€ ì•Šì•„ìš”. ê°„ì‹ì€ í•˜ë£¨ ì¹¼ë¡œë¦¬ì˜ 10% ì´ë‚´ë¡œ, ì£¼ 2~3íšŒê°€ ì ë‹¹í•´ìš”.

**Q. ê°•ì•„ì§€ê°€ {name} ì•ˆ ë¨¹ìœ¼ë©´ ì–´ë–¡í•˜ë‚˜ìš”?**
A. ê°•ì•„ì§€ë§ˆë‹¤ ê¸°í˜¸ê°€ ë‹¬ë¼ìš”. ì–µì§€ë¡œ ë¨¹ì´ì§€ ë§ê³  ë‹¤ë¥¸ ê°„ì‹ìœ¼ë¡œ ëŒ€ì²´í•´ì£¼ì„¸ìš”.


## ê°„ë‹¨ ë ˆì‹œí”¼

í–‡ì‚´ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì¤€ë¹„í•´ë´¤ì–´ìš”.

{cooking_text}

[ì´ë¯¸ì§€ 7ë²ˆ: ì¡°ë¦¬ë°©ë²• ì¸í¬ê·¸ë˜í”½]


í–‡ì‚´ì´ëŠ” {name} ëƒ„ìƒˆë§Œ ë§¡ì•„ë„ ê¼¬ë¦¬ë¥¼ í”ë“¤ì–´ìš”. 11ë…„ì§¸ í‚¤ìš°ë©´ì„œ ëŠë‚€ ê±´ë°, ìì—° ê°„ì‹ë§Œí¼ ì¢‹ì€ ê²Œ ì—†ë”ë¼ê³ ìš”.

## ë§ˆë¬´ë¦¬

{name} ê¸‰ì—¬, ì–´ë µì§€ ì•Šì£ ?
ìš°ë¦¬ ì•„ì´ë“¤ ê±´ê°•í•˜ê²Œ ê°„ì‹ ì£¼ëŠ” ê²Œ ë³´í˜¸ìë¡œì„œ ê°€ì¥ í° ê¸°ì¨ì¸ ê²ƒ ê°™ì•„ìš”.

ê¶ê¸ˆí•œ ì  ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”! ğŸ’›

11ë…„ê°„ í–‡ì‚´ì´ì™€ í•¨ê»˜í•˜ë©´ì„œ ì •ë§ ë§ì€ ìŒì‹ì„ ì‹œë„í•´ë´¤ì–´ìš”. ì²˜ìŒì—” ë­˜ ì¤˜ì•¼ í• ì§€, ë­˜ í”¼í•´ì•¼ í• ì§€ ë§‰ë§‰í–ˆëŠ”ë°, ì´ì œëŠ” ì–´ëŠ ì •ë„ ê°ì´ ìƒê²¼ë‹µë‹ˆë‹¤.

ê°•ì•„ì§€ë§ˆë‹¤ ì²´ì§ˆì´ ë‹¤ë¥´ë‹ˆê¹Œ, ìƒˆë¡œìš´ ìŒì‹ì„ ì¤„ ë•ŒëŠ” í•­ìƒ ì†ŒëŸ‰ë¶€í„° ì‹œì‘í•˜ëŠ” ê²Œ ì¢‹ì•„ìš”. ì €ë„ í–‡ì‚´ì´í•œí…Œ ìƒˆ ê°„ì‹ ì¤„ ë•ŒëŠ” ì½©ì•Œë§Œí¼ë§Œ ì£¼ê³  24ì‹œê°„ ê´€ì°°í•´ìš”.

ìš°ë¦¬ ì•„ì´ë“¤ ê±´ê°•ì€ ë³´í˜¸ìì˜ ì‘ì€ ê´€ì‹¬ì—ì„œ ì‹œì‘ëœë‹¤ê³  ìƒê°í•´ìš”. ì´ ê¸€ì´ ì—¬ëŸ¬ë¶„ê³¼ ë°˜ë ¤ê²¬ì—ê²Œ ë„ì›€ì´ ë˜ê¸¸ ë°”ë¼ìš”!

[ì´ë¯¸ì§€ 8ë²ˆ: í–‡ì‚´ì´ ì‚¬ì§„]


ì°¸ê³  ìë£Œ: AAFCO, ë¯¸êµ­ìˆ˜ì˜í•™í˜‘íšŒ, í« ì˜ì–‘í•™ ì—°êµ¬ ìë£Œ

#ê°•ì•„ì§€{name.replace(" ", "")} #ê°•ì•„ì§€ê°„ì‹ #ë°˜ë ¤ê²¬ìŒì‹ #ê°•ì•„ì§€ê±´ê°• #í«í‘¸ë“œ #ê°•ì•„ì§€ì¼€ì–´ #ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ #ì‹œë‹ˆì–´ë… #ê°•ì•„ì§€ì •ë³´ #ë°˜ë ¤ê²¬ê°€ì´ë“œ #ê°•ì•„ì§€ìŒì‹ê°€ì´ë“œ #dogfood #doghealth #petcare #ë…¸ë ¹ê²¬ê°„ì‹ #ê°•ì•„ì§€ê³¼ì¼
"""


def format_dosage_line(size: str, weight: str, amount: str, desc: str) -> str:
    """ê¸‰ì—¬ëŸ‰ì„ í‘œì¤€ í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…

    í‘œì¤€ í˜•ì‹: **ì†Œí˜•ê²¬ (5kg ì´í•˜)** â€” 5~10g (ì§ê´€ì  ë‹¨ìœ„)
    amountê°€ ì´ë¯¸ Xg ë˜ëŠ” X~Yg í˜•ì‹ì´ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©
    ì•„ë‹ˆë©´ amountë¥¼ ì§ê´€ì  ë‹¨ìœ„ë¡œ, ê¸°ë³¸ ê·¸ë¨ ì¶”ì •ì¹˜ ì¶”ê°€
    """
    import re

    # ì´ë¯¸ ê·¸ë¨ í˜•ì‹ì¸ì§€ í™•ì¸
    gram_pattern = r'^\d+[~\-]?\d*g$'
    if re.match(gram_pattern, amount):
        return f"**{size} ({weight})** â€” {amount} ({desc})"

    # ê·¸ë¨ì´ ì•„ë‹Œ ê²½ìš° - ì§ê´€ì  ë‹¨ìœ„ë¥¼ ê´„í˜¸ì—, ê·¸ë¨ ì¶”ì •ì¹˜ ì¶”ê°€
    # ì¼ë°˜ì ì¸ ë³€í™˜ ê·œì¹™
    gram_estimates = {
        "ì†Œí˜•ê²¬": "5~10g",
        "ì¤‘í˜•ê²¬": "10~20g",
        "ëŒ€í˜•ê²¬": "20~30g",
        "ì´ˆëŒ€í˜•ê²¬": "30~40g"
    }

    # íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ (ê¸‰ì—¬ ê¸ˆì§€ ë“±)
    if "ê¸‰ì—¬ ê¸ˆì§€" in amount:
        return f"**{size} ({weight})** â€” ê¸‰ì—¬ ê¸ˆì§€"

    gram = gram_estimates.get(size, "10~20g")
    # amountì™€ descë¥¼ í•©ì³ì„œ ì§ê´€ì  ë‹¨ìœ„ë¡œ
    intuitive_unit = f"{amount}, {desc}" if desc and desc != amount else amount

    return f"**{size} ({weight})** â€” {gram} ({intuitive_unit})"


def get_blog_caption_template_caution(name: str, data: dict) -> str:
    """CAUTION ë“±ê¸‰ ë¸”ë¡œê·¸ ìº¡ì…˜ í…œí”Œë¦¿"""
    nutrients = data.get("nutrients", [])
    dosages = data.get("dosages", {})
    do_items = data.get("do_items", [])
    dont_items = data.get("dont_items", [])
    precautions = data.get("precautions", [])
    cooking_steps = data.get("cooking_steps", [])

    # ì˜ì–‘ì†Œ í¬ë§·íŒ…
    nutrient_lines = []
    for n in nutrients[:4]:
        nutrient_lines.append(f"- {n['name']}: {n['value']}{n['unit']} ({n['benefit']})")
    nutrients_text = "\n".join(nutrient_lines) if nutrient_lines else "- ì˜ì–‘ ì •ë³´ í™•ì¸ í•„ìš”"

    # ê¸‰ì—¬ëŸ‰ í¬ë§·íŒ… - í‘œì¤€ í˜•ì‹ ì‚¬ìš©
    dosage_lines = []
    for size in ["ì†Œí˜•ê²¬", "ì¤‘í˜•ê²¬", "ëŒ€í˜•ê²¬", "ì´ˆëŒ€í˜•ê²¬"]:
        if size in dosages:
            d = dosages[size]
            dosage_lines.append(format_dosage_line(size, d['weight'], d['amount'], d['desc']))
    dosages_text = "\n".join(dosage_lines) if dosage_lines else "ìˆ˜ì˜ì‚¬ì™€ ìƒë‹´ í›„ ê¸‰ì—¬ëŸ‰ ê²°ì •"

    # Do/Don't í¬ë§·íŒ…
    do_lines = [f"âœ… {item}" for item in do_items[:3]] if do_items else ["âœ… ì†ŒëŸ‰ë§Œ ê¸‰ì—¬í•˜ì„¸ìš”"]
    dont_lines = [f"âŒ {item}" for item in dont_items[:3]] if dont_items else ["âŒ ê³¼ë‹¤ ê¸‰ì—¬ ê¸ˆì§€"]

    # ì£¼ì˜ì‚¬í•­ í¬ë§·íŒ…
    precaution_lines = []
    for p in precautions[:4]:
        precaution_lines.append(f"âš ï¸ {p['title']}: {p['desc']}")
    precautions_text = "\n".join(precaution_lines) if precaution_lines else "âš ï¸ ì²˜ìŒ ê¸‰ì—¬ ì‹œ ì†ŒëŸ‰ë¶€í„° ì‹œì‘í•˜ì„¸ìš”"

    return f"""[ì´ë¯¸ì§€ 1ë²ˆ: í‘œì§€]

ì•ˆë…•í•˜ì„¸ìš”, 11ì‚´ ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ í–‡ì‚´ì´ ì—„ë§ˆì˜ˆìš”.

ì˜¤ëŠ˜ì€ ë§ì€ ë¶„ë“¤ì´ ê¶ê¸ˆí•´í•˜ì‹œëŠ” '{name}' ê¸‰ì—¬ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¼ê²Œìš”.
ìš°ë¦¬ í–‡ì‚´ì´ë„ {name}ì„ ì •ë§ ì¢‹ì•„í•˜ëŠ”ë°ìš”, ì²˜ìŒ ì¤¬ì„ ë•Œ ë°˜ì‘ì´ ì•„ì§ë„ ê¸°ì–µë‚˜ìš”!

[ì´ë¯¸ì§€ 2ë²ˆ: ìŒì‹ ì‚¬ì§„]


## ê°•ì•„ì§€ {name}, ë¨¹ì–´ë„ ë˜ë‚˜ìš”?

ğŸŸ¡ ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, CAUTION ë“±ê¸‰ì´ì—ìš”.

{name}ì—ëŠ” ë‹¤ì–‘í•œ ì˜ì–‘ì†Œê°€ ë“¤ì–´ìˆì–´ìš”:
{nutrients_text}


[ì´ë¯¸ì§€ 3ë²ˆ: DogWithFood - í–‡ì‚´ì´ê°€ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê¸°ë‹¤ë¦¬ëŠ” ëª¨ìŠµ]

í–‡ì‚´ì´ê°€ ì œ ì˜†ì—ì„œ ì¡°ë¦¬ ê³¼ì •ì„ ì§€ì¼œë³¼ ë•Œë©´, 'ìš°ë¦¬ ì•„ì´í•œí…Œ ì•ˆì „í•˜ê²Œ ì¤˜ì•¼ì§€' í•˜ëŠ” ë§ˆìŒì´ ë” ì»¤ì ¸ìš”. CAUTION ë“±ê¸‰ ìŒì‹ì€ íŠ¹íˆ ë” ê¼¼ê¼¼í•˜ê²Œ ì¤€ë¹„í•´ìš”.

{name}ì€ ë°˜ë“œì‹œ ì£¼ì˜ì‚¬í•­ì„ ì§€ì¼œì„œ ê¸‰ì—¬í•´ì•¼ í•´ìš”. ì €ë„ í–‡ì‚´ì´í•œí…Œ ì¤„ ë•ŒëŠ” í•­ìƒ ì ì •ëŸ‰ë§Œ ëœì–´ì„œ ì¤ë‹ˆë‹¤.


## ì²´ì¤‘ë³„ ê¸‰ì—¬ëŸ‰

{dosages_text}


[ì´ë¯¸ì§€ 4ë²ˆ: ê¸‰ì—¬ ê°€ëŠ¥/ë¶ˆê°€]


## ê¸‰ì—¬ ì‹œ ì´ë ‡ê²Œ í•˜ì„¸ìš”

{chr(10).join(do_lines)}

## ì´ê±´ í”¼í•´ì£¼ì„¸ìš”

{chr(10).join(dont_lines)}

[ì´ë¯¸ì§€ 5ë²ˆ: ê¸‰ì—¬ëŸ‰ í‘œ]


## ì£¼ì˜ì‚¬í•­

{precautions_text}


[ì´ë¯¸ì§€ 6ë²ˆ: ì£¼ì˜ì‚¬í•­]

ë³´í˜¸ìë¡œì„œ í•­ìƒ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ì ‘ê·¼í•˜ëŠ” ê²Œ ì¢‹ì€ ê²ƒ ê°™ì•„ìš”. ì €ë„ í–‡ì‚´ì´í•œí…Œ ìƒˆë¡œìš´ ìŒì‹ ì¤„ ë•ŒëŠ” í•­ìƒ ìˆ˜ì˜ì‚¬ ì„ ìƒë‹˜ê»˜ ì—¬ì­¤ë³´ê³ , ì†ŒëŸ‰ë¶€í„° ì‹œì‘í•´ìš”.

'ê´œì°®ê² ì§€'ë¼ëŠ” ìƒê°ë³´ë‹¤ëŠ” 'í˜¹ì‹œ ëª¨ë¥´ë‹ˆê¹Œ ì¡°ì‹¬í•˜ì'ê°€ ìš°ë¦¬ ì•„ì´ë“¤ ê±´ê°•ì„ ì§€í‚¤ëŠ” ë°©ë²•ì´ì—ìš”.


## ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

**Q. {name} ì–¼ë§ˆë‚˜ ìì£¼ ì¤˜ë„ ë˜ë‚˜ìš”?**
A. ì£¼ 1~2íšŒ ì´ë‚´ë¡œ ì œí•œí•˜ì„¸ìš”. CAUTION ì‹í’ˆì€ ìì£¼ ê¸‰ì—¬í•˜ì§€ ì•ŠëŠ” ê²Œ ì¢‹ì•„ìš”.

**Q. {name} ë¨¹ê³  í† í•˜ë©´ ì–´ë–¡í•˜ë‚˜ìš”?**
A. ì¦‰ì‹œ ê¸‰ì—¬ë¥¼ ì¤‘ë‹¨í•˜ê³ , ì¦ìƒì´ ì§€ì†ë˜ë©´ ë™ë¬¼ë³‘ì›ì— ë°©ë¬¸í•˜ì„¸ìš”.

## ê°„ë‹¨ ë ˆì‹œí”¼

1. {name}ì„ ê¹¨ë—ì´ ì¤€ë¹„í•´ì£¼ì„¸ìš”
2. ê°•ì•„ì§€ì—ê²Œ ë§ê²Œ ì†ì§ˆí•˜ì„¸ìš”
3. ì ë‹¹í•œ í¬ê¸°ë¡œ ì˜ë¼ì£¼ì„¸ìš”
4. ì²˜ìŒì—” ì†ŒëŸ‰ë§Œ ê¸‰ì—¬í•˜ì„¸ìš”
5. ë°˜ì‘ì„ ê´€ì°°í•˜ì„¸ìš”

[ì´ë¯¸ì§€ 7ë²ˆ: ì¡°ë¦¬ ë°©ë²•]


í–‡ì‚´ì´í•œí…Œ ì²˜ìŒ {name} ì¤¬ì„ ë•Œ ì¡°ê¸ˆ ê±±ì •í–ˆì—ˆì–´ìš”. í•˜ì§€ë§Œ ì£¼ì˜ì‚¬í•­ë§Œ ì˜ ì§€í‚¤ë‹ˆê¹Œ íƒˆ ì—†ì´ ì˜ ë¨¹ë”ë¼ê³ ìš”.

## ë§ˆë¬´ë¦¬

{name}ì€ ì˜¬ë°”ë¥´ê²Œ ê¸‰ì—¬í•˜ë©´ ìš°ë¦¬ ê°•ì•„ì§€ì—ê²Œ ì¢‹ì€ ê°„ì‹ì´ ë  ìˆ˜ ìˆì–´ìš”.
ì²˜ìŒ ê¸‰ì—¬í•  ë•ŒëŠ” ì†ŒëŸ‰ìœ¼ë¡œ ì‹œì‘í•˜ê³ , ë°˜ì‘ì„ ì˜ ì‚´í´ë´ ì£¼ì„¸ìš”!

ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ’›

ê°•ì•„ì§€ ìŒì‹ ì •ë³´ëŠ” ì •ë§ ì‹ ì¤‘í•˜ê²Œ í™•ì¸í•´ì•¼ í•´ìš”. ì¸í„°ë„·ì— ì˜ëª»ëœ ì •ë³´ë„ ë§ê³ , ê°•ì•„ì§€ë§ˆë‹¤ ë°˜ì‘ì´ ë‹¤ë¥´ê±°ë“ ìš”.

ì €ëŠ” ìƒˆë¡œìš´ ìŒì‹ì„ ì¤„ ë•Œ í•­ìƒ ì´ ì„¸ ê°€ì§€ë¥¼ í™•ì¸í•´ìš”: 1) ìˆ˜ì˜ì‚¬ ì˜ê²¬, 2) í–‡ì‚´ì´ ë°˜ì‘, 3) ë³€ ìƒíƒœ. ì´ ì„¸ ê°€ì§€ë§Œ ì²´í¬í•´ë„ ëŒ€ë¶€ë¶„ì˜ ë¬¸ì œë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì–´ìš”.

11ì‚´ ì‹œë‹ˆì–´ê²¬ì¸ í–‡ì‚´ì´ë„ ì´ì œ ì†Œí™”ë ¥ì´ ì˜ˆì „ ê°™ì§€ ì•Šì•„ì„œ, ìƒˆë¡œìš´ ìŒì‹ì€ ë” ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê¸‰ì—¬í•˜ê³  ìˆì–´ìš”.

[ì´ë¯¸ì§€ 8ë²ˆ: CTA]

#ê°•ì•„ì§€{name.replace(" ", "")} #ê°•ì•„ì§€ê°„ì‹ #ë°˜ë ¤ê²¬ìŒì‹ #ê°•ì•„ì§€ê±´ê°• #í«í‘¸ë“œ #ê°•ì•„ì§€ì¼€ì–´ #ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ #ì‹œë‹ˆì–´ë… #ê°•ì•„ì§€ì •ë³´ #ë°˜ë ¤ê²¬ê°€ì´ë“œ #ê°•ì•„ì§€ìŒì‹ê°€ì´ë“œ #dogfood #doghealth #petcare #ê°•ì•„ì§€ì£¼ì˜ìŒì‹ #ê°•ì•„ì§€ê°„ì‹ì¶”ì²œ
"""


def get_blog_caption_template_danger(name: str, data: dict) -> str:
    """DANGER ë“±ê¸‰ ë¸”ë¡œê·¸ ìº¡ì…˜ í…œí”Œë¦¿"""
    nutrients = data.get("nutrients", [])
    dosages = data.get("dosages", {})
    dont_items = data.get("dont_items", [])
    precautions = data.get("precautions", [])
    reason = data.get("reason", "ìœ„í—˜ ìš”ì†Œ í¬í•¨")

    # ì˜ì–‘ì†Œ/ìœ„í—˜ìš”ì†Œ í¬ë§·íŒ…
    nutrient_lines = []
    for n in nutrients[:4]:
        nutrient_lines.append(f"- {n['name']}: {n['value']}{n['unit']} ({n['benefit']})")
    nutrients_text = "\n".join(nutrient_lines) if nutrient_lines else f"- ìœ„í—˜ ìš”ì†Œ: {reason}"

    # ê¸‰ì—¬ëŸ‰ í¬ë§·íŒ… - í‘œì¤€ í˜•ì‹ ì‚¬ìš©
    dosage_lines = []
    for size in ["ì†Œí˜•ê²¬", "ì¤‘í˜•ê²¬", "ëŒ€í˜•ê²¬", "ì´ˆëŒ€í˜•ê²¬"]:
        if size in dosages:
            d = dosages[size]
            dosage_lines.append(format_dosage_line(size, d['weight'], d['amount'], d['desc']))
    dosages_text = "\n".join(dosage_lines) if dosage_lines else "ê¸‰ì—¬ë¥¼ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"

    # ì£¼ì˜ì‚¬í•­ í¬ë§·íŒ…
    precaution_lines = []
    for p in precautions[:4]:
        precaution_lines.append(f"âš ï¸ {p['title']}: {p['desc']}")
    precautions_text = "\n".join(precaution_lines) if precaution_lines else f"âš ï¸ ì£¼ì˜ í•„ìš”: {reason}"

    return f"""[ì´ë¯¸ì§€ 1ë²ˆ: í‘œì§€]

ì•ˆë…•í•˜ì„¸ìš”, 11ì‚´ ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ í–‡ì‚´ì´ ì—„ë§ˆì˜ˆìš”.

ì˜¤ëŠ˜ì€ ë§ì€ ë¶„ë“¤ì´ ê¶ê¸ˆí•´í•˜ì‹œëŠ” '{name}' ê¸‰ì—¬ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¼ê²Œìš”.
ì´ ìŒì‹ì€ íŠ¹íˆ ì£¼ì˜ê°€ í•„ìš”í•´ìš”!

[ì´ë¯¸ì§€ 2ë²ˆ: ìŒì‹ ì‚¬ì§„]


## ê°•ì•„ì§€ {name}, ë¨¹ì–´ë„ ë˜ë‚˜ìš”?

ğŸŸ  ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, DANGER ë“±ê¸‰ì´ì—ìš”.

{name}ì€ ê°•ì•„ì§€ì—ê²Œ ìœ„í—˜í•  ìˆ˜ ìˆì–´ìš”:
{nutrients_text}


[ì´ë¯¸ì§€ 3ë²ˆ: DogWithFood - í–‡ì‚´ì´ê°€ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê¸°ë‹¤ë¦¬ëŠ” ëª¨ìŠµ]

í–‡ì‚´ì´ê°€ ì œ ì˜†ì—ì„œ {name}ì„ ë°”ë¼ë³¼ ë•Œë©´, 'ì •ë§ ì¤˜ë„ ë˜ëŠ” ê±¸ê¹Œ?' í•˜ëŠ” ê±±ì •ì´ ì•ì„œìš”. DANGER ë“±ê¸‰ ìŒì‹ì€ ê°€ê¸‰ì  í”¼í•˜ëŠ” ê²Œ ì¢‹ì§€ë§Œ, ì •ë§ ì£¼ê³  ì‹¶ë‹¤ë©´ ê·¹ì†ŒëŸ‰ë§Œ ì£¼ì„¸ìš”.

ì†”ì§íˆ í–‡ì‚´ì´í•œí…Œ {name}ì€ ê±°ì˜ ì•ˆ ì¤˜ìš”. ìœ„í—˜ ë¶€ë‹´ì´ ìˆì–´ì„œ ë‹¤ë¥¸ ì•ˆì „í•œ ê°„ì‹ìœ¼ë¡œ ëŒ€ì²´í•˜ê³  ìˆì–´ìš”.


## ì²´ì¤‘ë³„ ê¸‰ì—¬ëŸ‰

{dosages_text}

[ì´ë¯¸ì§€ 4ë²ˆ: ê¸‰ì—¬ ê°€ëŠ¥/ë¶ˆê°€]


## ê¸‰ì—¬ ì‹œ ì´ë ‡ê²Œ í•˜ì„¸ìš”

âœ… ê·¹ì†ŒëŸ‰ë§Œ ê¸‰ì—¬í•˜ì„¸ìš”
âœ… ìì£¼ ì£¼ì§€ ë§ˆì„¸ìš”
âœ… ë°˜ì‘ì„ ê¼­ í™•ì¸í•˜ì„¸ìš”

## ì´ê±´ í”¼í•´ì£¼ì„¸ìš”

âŒ ê³¼ë‹¤ ê¸‰ì—¬ëŠ” ì ˆëŒ€ ê¸ˆì§€
âŒ ë§¤ì¼ ê¸‰ì—¬ ê¸ˆì§€
âŒ ì´ìƒ ì¦ìƒ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨

[ì´ë¯¸ì§€ 5ë²ˆ: ê¸‰ì—¬ëŸ‰ í‘œ]


## ì£¼ì˜ì‚¬í•­

{precautions_text}


[ì´ë¯¸ì§€ 6ë²ˆ: ì£¼ì˜ì‚¬í•­]

ìˆ˜ì˜ì‚¬ ì„ ìƒë‹˜ë„ {name}ì€ ì¡°ì‹¬í•˜ë¼ê³  í•˜ì…¨ì–´ìš”. êµ³ì´ ìœ„í—˜ì„ ê°ìˆ˜í•  í•„ìš” ì—†ì–ì•„ìš”.

ì œê°€ ì´ëŸ° ì •ë³´ë¥¼ ê³µìœ í•˜ëŠ” ì´ìœ ëŠ”, ì €ë„ ì²˜ìŒì—” ëª°ëë˜ ê²ƒë“¤ì´ ë§ì•˜ê¸° ë•Œë¬¸ì´ì—ìš”. 11ë…„ ë™ì•ˆ í–‡ì‚´ì´ í‚¤ìš°ë©´ì„œ ë°°ìš´ ê²ƒë“¤ì„ ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”.

ìœ„í—˜í•œ ìŒì‹ì€ í”¼í•˜ê³ , ì•ˆì „í•œ ëŒ€ì²´ ê°„ì‹ì„ ì°¾ì•„ì£¼ëŠ” ê²Œ í˜„ëª…í•œ ì„ íƒì´ì—ìš”.


## ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

**Q. {name} ê°€ë” ì¤˜ë„ ë˜ë‚˜ìš”?**
A. ê°€ê¸‰ì  í”¼í•˜ì‹œëŠ” ê²Œ ì¢‹ì•„ìš”. ê¼­ ì£¼ê³  ì‹¶ë‹¤ë©´ ì•„ì£¼ ê°€ë”, ê·¹ì†ŒëŸ‰ë§Œ ì£¼ì„¸ìš”.

**Q. {name} ë¨¹ê³  ì´ìƒ ì¦ìƒì´ ë‚˜íƒ€ë‚˜ë©´ ì–´ë–¡í•˜ë‚˜ìš”?**
A. ì¦‰ì‹œ ê¸‰ì—¬ë¥¼ ì¤‘ë‹¨í•˜ê³ , ì¦ìƒì´ ì§€ì†ë˜ë©´ ë™ë¬¼ë³‘ì›ì— ë°©ë¬¸í•˜ì„¸ìš”.

## ì•ˆì „í•œ ëŒ€ì²´ ê°„ì‹

{name} ëŒ€ì‹  ì•ˆì „í•œ ê°„ì‹ìœ¼ë¡œ ëŒ€ì²´í•´ì£¼ì„¸ìš”:
- ì‚¶ì€ ë‹¹ê·¼
- ì‚¶ì€ ê³ êµ¬ë§ˆ
- ì‚¶ì€ ë‹­ê°€ìŠ´ì‚´

[ì´ë¯¸ì§€ 7ë²ˆ: ëŒ€ì²´ ê°„ì‹]


11ì‚´ ì‹œë‹ˆì–´ê²¬ì¸ í–‡ì‚´ì´ë„ {name}ì€ ê±°ì˜ ì•ˆ ë¨¹ì—¬ìš”. ë‚˜ì´ ë“¤ìˆ˜ë¡ ì†Œí™”ë ¥ë„ ë–¨ì–´ì§€ê³ , êµ³ì´ ìœ„í—˜ì„ ê°ìˆ˜í•  í•„ìš”ê°€ ì—†ë”ë¼ê³ ìš”.

ìœ„í—˜í•œ ìŒì‹ ì •ë³´ëŠ” ê¼­ ì•Œì•„ë‘ì…”ì•¼ í•´ìš”. ì €ë„ ì²˜ìŒì—” ëª°ëë˜ ê²ƒë“¤ì´ ë§ì•˜ì–´ìš”. 11ë…„ ë™ì•ˆ í–‡ì‚´ì´ í‚¤ìš°ë©´ì„œ ë°°ìš´ ê²ƒë“¤ì„ ê³µìœ í•´ìš”.

## ë§ˆë¬´ë¦¬

{name}ì€ DANGER ë“±ê¸‰ìœ¼ë¡œ, ê°€ê¸‰ì  í”¼í•˜ì‹œëŠ” ê²Œ ì¢‹ì•„ìš”.
ì •ë§ ì£¼ê³  ì‹¶ë‹¤ë©´ ê·¹ì†ŒëŸ‰ë§Œ, ì•„ì£¼ ê°€ë” ì£¼ì„¸ìš”!

ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ’›

ìš°ë¦¬ ì•„ì´ë“¤ ê±´ê°•ì„ ìœ„í•´ ìœ„í—˜í•œ ìŒì‹ì€ ì•„ì˜ˆ ì†ì´ ë‹¿ì§€ ì•ŠëŠ” ê³³ì— ë³´ê´€í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ì„¸ìš”! ì €ë„ í–‡ì‚´ì´í•œí…Œ ìœ„í—˜í•œ ìŒì‹ì€ í•­ìƒ ë†’ì€ ê³³ì— ë‘ê³ , ì†ì´ ë‹¿ì§€ ì•Šê²Œ ê´€ë¦¬í•´ìš”.

ì£¼ë³€ì—ì„œ ëª¨ë¥´ê³  ê¸‰ì—¬í–ˆë‹¤ê°€ ì‘ê¸‰ì‹¤ ê°”ë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ ì¢…ì¢… ë“¤ì–´ìš”. ì‚¬ì „ì— ì•Œê³  ìˆì—ˆë‹¤ë©´ í”¼í•  ìˆ˜ ìˆì—ˆì„ í…ë° í•˜ëŠ” ë§ˆìŒì´ ë“¤ì–´ìš”.

[ì´ë¯¸ì§€ 8ë²ˆ: CTA]

#ê°•ì•„ì§€{name.replace(" ", "")} #ê°•ì•„ì§€ê°„ì‹ #ë°˜ë ¤ê²¬ìŒì‹ #ê°•ì•„ì§€ê±´ê°• #í«í‘¸ë“œ #ê°•ì•„ì§€ì¼€ì–´ #ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ #ì‹œë‹ˆì–´ë… #ê°•ì•„ì§€ì •ë³´ #ë°˜ë ¤ê²¬ê°€ì´ë“œ #ê°•ì•„ì§€ìŒì‹ê°€ì´ë“œ #dogfood #doghealth #petcare #ê°•ì•„ì§€ì£¼ì˜ìŒì‹ #ê°•ì•„ì§€ê°„ì‹ì¶”ì²œ
"""


def get_blog_caption_template_forbidden(name: str, data: dict) -> str:
    """FORBIDDEN ë“±ê¸‰ ë¸”ë¡œê·¸ ìº¡ì…˜ í…œí”Œë¦¿"""
    nutrients = data.get("nutrients", [])
    dont_items = data.get("dont_items", [])
    precautions = data.get("precautions", [])
    reason = data.get("reason", "ë…ì„± ìœ„í—˜")

    # ì˜ì–‘ì†Œ/ìœ„í—˜ìš”ì†Œ í¬ë§·íŒ…
    nutrient_lines = []
    for n in nutrients[:4]:
        nutrient_lines.append(f"- {n['name']}: {n['value']}{n['unit']} ({n['benefit']})")
    nutrients_text = "\n".join(nutrient_lines) if nutrient_lines else f"- ìœ„í—˜ ìš”ì†Œ: {reason}"

    # ì£¼ì˜ì‚¬í•­ í¬ë§·íŒ…
    precaution_lines = []
    for p in precautions[:4]:
        precaution_lines.append(f"âš ï¸ {p['title']}: {p['desc']}")
    precautions_text = "\n".join(precaution_lines) if precaution_lines else f"âš ï¸ ì ˆëŒ€ ê¸‰ì—¬ ê¸ˆì§€: {reason}"

    return f"""[ì´ë¯¸ì§€ 1ë²ˆ: í‘œì§€]

ì•ˆë…•í•˜ì„¸ìš”, 11ì‚´ ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ í–‡ì‚´ì´ ì—„ë§ˆì˜ˆìš”.

ì˜¤ëŠ˜ì€ ë§ì€ ë¶„ë“¤ì´ ê¶ê¸ˆí•´í•˜ì‹œëŠ” '{name}' ê¸‰ì—¬ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¼ê²Œìš”.
ì´ ìŒì‹ì€ ì •ë§ ì¡°ì‹¬í•´ì•¼ í•´ìš”!

[ì´ë¯¸ì§€ 2ë²ˆ: ìŒì‹ ì‚¬ì§„]


## ê°•ì•„ì§€ {name}, ë¨¹ì–´ë„ ë˜ë‚˜ìš”?

â›” ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, FORBIDDEN ë“±ê¸‰ì´ì—ìš”.

{name}ì€ ê°•ì•„ì§€ì—ê²Œ ë§¤ìš° ìœ„í—˜í•´ìš”:
{nutrients_text}


[ì´ë¯¸ì§€ 3ë²ˆ: DogWithFood - í–‡ì‚´ì´ê°€ ë©€ë¦¬ì„œ ë°”ë¼ë³´ëŠ” ëª¨ìŠµ]

í–‡ì‚´ì´í•œí…Œ {name}ì€ ì ˆëŒ€ ì£¼ì§€ ì•Šì•„ìš”. ì•„ë¬´ë¦¬ ë¨¹ê³  ì‹¶ì–´í•˜ëŠ” ëˆˆë¹›ìœ¼ë¡œ ì³ë‹¤ë´ë„, ìš°ë¦¬ ì•„ì´ ê±´ê°•ì„ ìœ„í•´ ë‹¨í˜¸í•˜ê²Œ ê±°ì ˆí•´ìš”.

FORBIDDEN ë“±ê¸‰ ìŒì‹ì€ ì•„ì˜ˆ ì†ì´ ë‹¿ì§€ ì•ŠëŠ” ê³³ì— ë³´ê´€í•˜ëŠ” ê²Œ ì¢‹ì•„ìš”. ì‹¤ìˆ˜ë¡œë¼ë„ ë¨¹ê²Œ ë˜ë©´ í°ì¼ì´ì—ìš”.

ì €ë„ ì²˜ìŒì—” ì´ê²Œ ì™œ ìœ„í—˜í•œì§€ ëª°ëì–´ìš”. ì£¼ë³€ì—ì„œ ëª¨ë¥´ê³  ê¸‰ì—¬í–ˆë‹¤ê°€ ì‘ê¸‰ì‹¤ ê°”ë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ ë“£ê³  ë‚˜ì„œì•¼ ì•Œê²Œ ëì£ .


## ì²´ì¤‘ë³„ ê¸‰ì—¬ëŸ‰

**ì†Œí˜•ê²¬ (5kg ì´í•˜)** â€” ê¸‰ì—¬ ê¸ˆì§€
**ì¤‘í˜•ê²¬ (5~15kg)** â€” ê¸‰ì—¬ ê¸ˆì§€
**ëŒ€í˜•ê²¬ (15~30kg)** â€” ê¸‰ì—¬ ê¸ˆì§€
**ì´ˆëŒ€í˜•ê²¬ (30kg ì´ìƒ)** â€” ê¸‰ì—¬ ê¸ˆì§€

ì–´ë–¤ ì²´ì¤‘ì´ë“  ê¸‰ì—¬í•˜ì‹œë©´ ì•ˆ ë¼ìš”!

[ì´ë¯¸ì§€ 4ë²ˆ: ê¸‰ì—¬ ê°€ëŠ¥/ë¶ˆê°€]


## ì´ê±´ ì ˆëŒ€ ì•ˆ ë¼ìš”

âŒ ì†ŒëŸ‰ë„ ê¸‰ì—¬ ê¸ˆì§€
âŒ ê°€ê³µí’ˆë„ ê¸‰ì—¬ ê¸ˆì§€
âŒ ì‹¤ìˆ˜ë¡œ ë¨¹ì—ˆë‹¤ë©´ ì¦‰ì‹œ ë³‘ì›ìœ¼ë¡œ
âŒ ë‹¤ë¥¸ ìŒì‹ì— ì„ì—¬ ìˆì–´ë„ ê¸‰ì—¬ ê¸ˆì§€

[ì´ë¯¸ì§€ 5ë²ˆ: ê¸‰ì—¬ëŸ‰ í‘œ]


## ì£¼ì˜ì‚¬í•­

{precautions_text}


[ì´ë¯¸ì§€ 6ë²ˆ: ì£¼ì˜ì‚¬í•­]

ì´ ê¸€ì„ ì“°ëŠ” ì´ìœ ëŠ” ì •ë§ ë§ì€ ë¶„ë“¤ì´ ëª¨ë¥´ê³  ê¸‰ì—¬í•˜ì‹œê¸° ë•Œë¬¸ì´ì—ìš”. ì €ë„ ì²˜ìŒì—” ëª°ëì–´ìš”.

ìš°ë¦¬ ì•„ì´ë“¤ ê±´ê°•ì„ ìœ„í•´ ê¼­ ì•Œì•„ë‘ì…”ì•¼ í•  ì •ë³´ë¼ì„œ ê³µìœ í•´ìš”. ì£¼ë³€ì— ë°˜ë ¤ê²¬ í‚¤ìš°ì‹œëŠ” ë¶„ë“¤ê»˜ë„ ê¼­ ì•Œë ¤ì£¼ì„¸ìš”!

í–‡ì‚´ì´í•œí…Œ {name}ì€ ì ˆëŒ€ ì•ˆ ì¤˜ìš”. í•œ ë²ˆì˜ ì‹¤ìˆ˜ê°€ í° ì‚¬ê³ ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œìš”.


## ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

**Q. {name} ì¡°ê¸ˆë§Œ ì¤˜ë„ ì•ˆ ë˜ë‚˜ìš”?**
A. ë„¤, ì†ŒëŸ‰ë„ ìœ„í—˜í•´ìš”. ë…ì„±ì´ ì¶•ì ë  ìˆ˜ ìˆì–´ ì ˆëŒ€ ê¸‰ì—¬í•˜ì§€ ë§ˆì„¸ìš”.

**Q. ì‹¤ìˆ˜ë¡œ {name} ë¨¹ì—ˆìœ¼ë©´ ì–´ë–¡í•˜ë‚˜ìš”?**
A. ì¦‰ì‹œ ë™ë¬¼ë³‘ì›ì— ì—°ë½í•˜ì„¸ìš”. ë¨¹ì€ ì–‘ê³¼ ì‹œê°„ì„ ì •í™•íˆ ì•Œë ¤ì£¼ì„¸ìš”.

**Q. {name}ì´ ë“¤ì–´ê°„ ìŒì‹ë„ ì•ˆ ë˜ë‚˜ìš”?**
A. ë„¤, {name} ì„±ë¶„ì´ ì¡°ê¸ˆì´ë¼ë„ ë“¤ì–´ê°„ ìŒì‹ì€ ëª¨ë‘ ê¸‰ì—¬ ê¸ˆì§€ì˜ˆìš”.

## ì•ˆì „í•œ ëŒ€ì²´ ê°„ì‹

{name} ëŒ€ì‹  ì•ˆì „í•œ ê°„ì‹ìœ¼ë¡œ ëŒ€ì²´í•´ì£¼ì„¸ìš”:
- ì‚¶ì€ ë‹¹ê·¼ (ë¹„íƒ€ë¯¼ í’ë¶€)
- ì‚¶ì€ ê³ êµ¬ë§ˆ (ì‹ì´ì„¬ìœ  í’ë¶€)
- ì‚¶ì€ ë‹­ê°€ìŠ´ì‚´ (ë‹¨ë°±ì§ˆ ê³µê¸‰)
- ì‚¬ê³¼ (ì”¨ ì œê±° í›„)

[ì´ë¯¸ì§€ 7ë²ˆ: ëŒ€ì²´ ê°„ì‹]


ì£¼ë³€ì—ì„œ ëª¨ë¥´ê³  {name} ì£¼ì…¨ë‹¤ê°€ ë³‘ì› ê°”ë‹¤ëŠ” ì´ì•¼ê¸° ë“¤ìœ¼ë©´ ì •ë§ ë§ˆìŒì´ ì•„íŒŒìš”.

## ë§ˆë¬´ë¦¬

{name}ì€ ê°•ì•„ì§€ì—ê²Œ ê¸‰ì—¬ ê¸ˆì§€ ìŒì‹ì´ì—ìš”.
ì ˆëŒ€ ì£¼ì§€ ë§ˆì‹œê³ , ì•ˆì „í•œ ëŒ€ì²´ ê°„ì‹ì„ ì°¾ì•„ì£¼ì„¸ìš”!

ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ’›

ì ˆëŒ€ ê¸‰ì—¬ ê¸ˆì§€ ìŒì‹ì€ ì •ë§ ì¡°ì‹¬í•´ì•¼ í•´ìš”. ì†ŒëŸ‰ì´ë¼ë„ ë…ì„±ì´ ìˆì–´ì„œ í•œ ë²ˆì˜ ì‹¤ìˆ˜ê°€ í° ì‚¬ê³ ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.

ì£¼ë³€ì—ì„œ ëª¨ë¥´ê³  ê¸‰ì—¬í–ˆë‹¤ê°€ ë³‘ì›ì— ì…ì›í–ˆë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ ë“¤ì„ ë•Œë§ˆë‹¤ ë§ˆìŒì´ ì•„íŒŒìš”. ì´ëŸ° ì¼ì´ ì—†ë„ë¡ ì •ë³´ë¥¼ ë„ë¦¬ ì•Œë ¤ì•¼ í•´ìš”.

ì €ë„ ì²˜ìŒì—ëŠ” ì´ëŸ° ì •ë³´ë¥¼ ëª°ëì–´ìš”. ë°˜ë ¤ê²¬ì„ í‚¤ìš°ê¸° ì‹œì‘í•˜ë©´ì„œ í•˜ë‚˜ì”© ë°°ì›Œê°”ì£ . ì´ ê¸€ì´ ë‹¤ë¥¸ ë³´í˜¸ìë¶„ë“¤ê»˜ ë„ì›€ì´ ë˜ê¸¸ ë°”ë¼ìš”.

11ë…„ê°„ í–‡ì‚´ì´ì™€ í•¨ê»˜í•˜ë©´ì„œ ì •ë§ ë§ì€ ìŒì‹ì„ ì‹œë„í•´ë´¤ì–´ìš”. í•˜ì§€ë§Œ ìœ„í—˜í•œ ìŒì‹ì€ ì•„ë¬´ë¦¬ í–‡ì‚´ì´ê°€ ì›í•´ë„ ì ˆëŒ€ ì£¼ì§€ ì•Šì•„ìš”. ìš°ë¦¬ ì•„ì´ë“¤ ê±´ê°•ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹ˆê¹Œìš”.

[ì´ë¯¸ì§€ 8ë²ˆ: CTA]

#ê°•ì•„ì§€{name.replace(" ", "")} #ê°•ì•„ì§€ê°„ì‹ #ë°˜ë ¤ê²¬ìŒì‹ #ê°•ì•„ì§€ê±´ê°• #í«í‘¸ë“œ #ê°•ì•„ì§€ì¼€ì–´ #ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ #ì‹œë‹ˆì–´ë… #ê°•ì•„ì§€ì •ë³´ #ë°˜ë ¤ê²¬ê°€ì´ë“œ #ê°•ì•„ì§€ìŒì‹ê°€ì´ë“œ #dogfood #doghealth #petcare #ê°•ì•„ì§€ìœ„í—˜ìŒì‹ #ê°•ì•„ì§€ê¸‰ì—¬ê¸ˆì§€
"""


def regenerate_caption(food_id: int, food_data: dict) -> tuple:
    """íŠ¹ì • ìŒì‹ IDì˜ ë¸”ë¡œê·¸ ìº¡ì…˜ ì¬ìƒì„±"""
    food_id_str = str(food_id)

    if food_id_str not in food_data:
        return None, f"food_data.jsonì— {food_id} ì—†ìŒ"

    data = food_data[food_id_str]
    name = data.get("name", "")
    safety = data.get("safety", "SAFE")

    # í´ë” ì°¾ê¸°
    folder_pattern = f"{food_id:03d}_*"
    matches = list(CONTENTS_DIR.glob(folder_pattern))

    if not matches:
        return None, f"í´ë” ì—†ìŒ: {folder_pattern}"

    blog_folder = matches[0] / "02_Blog"
    if not blog_folder.exists():
        return None, f"02_Blog í´ë” ì—†ìŒ"

    # ê¸°ì¡´ ìº¡ì…˜ íŒŒì¼ ì°¾ê¸°
    caption_files = list(blog_folder.glob("*_Blog_Caption.txt"))

    # ìƒˆ ìº¡ì…˜ ìƒì„±
    if safety == "SAFE":
        new_content = get_blog_caption_template_safe(name, data)
    elif safety == "CAUTION":
        new_content = get_blog_caption_template_caution(name, data)
    elif safety == "DANGER":
        new_content = get_blog_caption_template_danger(name, data)
    elif safety == "FORBIDDEN":
        new_content = get_blog_caption_template_forbidden(name, data)
    else:
        new_content = get_blog_caption_template_safe(name, data)

    # íŒŒì¼ëª… ê²°ì •
    english_name = data.get("english_name", name).split("_")[0].replace(" ", "")
    new_filename = f"{english_name.title()}_{safety}_Blog_Caption.txt"
    new_path = blog_folder / new_filename

    # ê¸°ì¡´ íŒŒì¼ ì‚­ì œ (í•„ìš” ì‹œ)
    for old_file in caption_files:
        if old_file != new_path:
            old_file.unlink()

    # ìƒˆ íŒŒì¼ ì €ì¥
    new_path.write_text(new_content.strip(), encoding='utf-8')

    return new_path, f"ì¬ìƒì„± ì™„ë£Œ: {name} ({safety})"


def main():
    """ë©”ì¸ í•¨ìˆ˜"""
    if len(sys.argv) < 2:
        print("ì‚¬ìš©ë²•: python regenerate_blog_captions.py <food_id> [food_id ...]")
        print("ì˜ˆì‹œ: python regenerate_blog_captions.py 80 145 148 151 153")
        sys.exit(1)

    food_ids = [int(x) for x in sys.argv[1:]]

    with open(FOOD_DATA_PATH, "r", encoding="utf-8") as f:
        food_data = json.load(f)

    print("=" * 60)
    print(f"ë¸”ë¡œê·¸ ìº¡ì…˜ ì¬ìƒì„±")
    print("=" * 60)

    for food_id in food_ids:
        result, message = regenerate_caption(food_id, food_data)
        if result:
            print(f"[OK] {food_id:03d}: {message}")
        else:
            print(f"[FAIL] {food_id:03d}: {message}")

    print("=" * 60)
    print("ì™„ë£Œ")


if __name__ == "__main__":
    main()
