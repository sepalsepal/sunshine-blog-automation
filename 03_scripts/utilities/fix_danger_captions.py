#!/usr/bin/env python3
"""
DANGER ìŒì‹ ìº¡ì…˜ ìˆ˜ì • - ìŒë£Œìˆ˜ ë“±
"""

from pathlib import Path

BASE_DIR = Path("/Users/al02399300/Desktop/Jun_AI/Dog_Contents/project_sunshine")
CONTENT_DIR = BASE_DIR / "content/images"

# DANGER ìŒë£Œìˆ˜ ëª©ë¡
DANGER_BEVERAGES = {
    'budweiser': ('ë²„ë“œì™€ì´ì €', 'ë§¥ì£¼(ì•Œì½”ì˜¬)'),
    'cass_beer': ('ì¹´ìŠ¤ë§¥ì£¼', 'ë§¥ì£¼(ì•Œì½”ì˜¬)'),
    'coca_cola': ('ì½”ì¹´ì½œë¼', 'íƒ„ì‚°ìŒë£Œ(ì¹´í˜ì¸+ì„¤íƒ•)'),
    'fanta': ('í™˜íƒ€', 'íƒ„ì‚°ìŒë£Œ(ì„¤íƒ•)'),
    'milkis': ('ë°€í‚¤ìŠ¤', 'íƒ„ì‚°ìŒë£Œ(ì„¤íƒ•)'),
    'perrier': ('í˜ë¦¬ì—', 'íƒ„ì‚°ìˆ˜'),
    'soju': ('ì†Œì£¼', 'ì•Œì½”ì˜¬'),
    'starbucks_coffee': ('ìŠ¤íƒ€ë²…ìŠ¤ì»¤í”¼', 'ì»¤í”¼(ì¹´í˜ì¸)'),
    'sprite': ('ìŠ¤í”„ë¼ì´íŠ¸', 'íƒ„ì‚°ìŒë£Œ(ì„¤íƒ•)'),
}

def generate_danger_caption_instagram(topic_kr, topic_en, danger_reason):
    return f"""ğŸš« {topic_kr}, ê°•ì•„ì§€ì—ê²Œ ì£¼ì§€ ë§ˆì„¸ìš”!

ìš°ë¦¬ ëŒ•ëŒ•ì´í•œí…Œ {topic_kr}ì€(ëŠ”) ìœ„í—˜í•´ìš” âš ï¸

âŒ {danger_reason} - ê°•ì•„ì§€ì—ê²Œ í•´ë¡œì›Œìš”
âŒ ì‹¤ìˆ˜ë¡œ ë§ˆì…¨ë‹¤ë©´ ì¦‰ì‹œ ë³‘ì›ìœ¼ë¡œ!

ğŸ“Œ ì €ì¥í•´ë‘ê³  ê°€ì¡±ë“¤ê³¼ ê³µìœ í•˜ì„¸ìš”!

ğŸ’¬ ìš°ë¦¬ ì§‘ ëŒ•ëŒ•ì´ ì´ë¦„ì€?
ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì„¸ìš”! ğŸ¾

#ê°•ì•„ì§€ #ë°˜ë ¤ê²¬ #ê°•ì•„ì§€ìŒì‹ #ëŒ•ëŒ•ì´ #ê³¨ë“ ë¦¬íŠ¸ë¦¬ë²„ #í–‡ì‚´ì´ #{topic_en} #{topic_kr} #ê°•ì•„ì§€ê¸ˆì§€ìŒì‹ #í«ìŠ¤íƒ€ê·¸ë¨ #ë©ìŠ¤íƒ€ê·¸ë¨

â„¹ï¸ ì¼ë¶€ ì´ë¯¸ì§€ëŠ” AIë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
â„¹ï¸ Some images were generated by AI."""

def generate_danger_caption_threads(topic_kr, topic_en, danger_reason):
    return f"""ğŸš« {topic_kr} - ê°•ì•„ì§€ ê¸ˆì§€!

âŒ {danger_reason}
ì ˆëŒ€ ì£¼ì§€ ë§ˆì„¸ìš” âš ï¸

#ê°•ì•„ì§€ #{topic_kr} #ë°˜ë ¤ê²¬

â„¹ï¸ AI ìƒì„± ì´ë¯¸ì§€ í¬í•¨"""

def main():
    print("=" * 60)
    print("ğŸ”§ DANGER ìŒë£Œìˆ˜ ìº¡ì…˜ ìˆ˜ì •")
    print("=" * 60)

    fixed = 0

    for folder in sorted(CONTENT_DIR.iterdir()):
        if not folder.is_dir():
            continue

        folder_name = folder.name

        for eng_name, (kr_name, reason) in DANGER_BEVERAGES.items():
            if eng_name in folder_name:
                # Instagram ìº¡ì…˜ ìˆ˜ì •
                caption_insta = folder / "caption_instagram.txt"
                caption_threads = folder / "caption_threads.txt"

                if caption_insta.exists():
                    caption_insta.write_text(
                        generate_danger_caption_instagram(kr_name, eng_name, reason),
                        encoding='utf-8'
                    )

                if caption_threads.exists():
                    caption_threads.write_text(
                        generate_danger_caption_threads(kr_name, eng_name, reason),
                        encoding='utf-8'
                    )

                print(f"  âœ… {folder_name} â†’ DANGER ìº¡ì…˜ ì ìš©")
                fixed += 1
                break

    print(f"\nâœ… ì´ {fixed}ê°œ ìˆ˜ì • ì™„ë£Œ")

if __name__ == "__main__":
    main()
