# Failure Map v0.1

> **버전:** v0.1
> **작성일:** 2026-01-31
> **용도:** FAIL 수집 및 패턴 분석

---

## 현재 Top 3 실패 유형 (사전 정의)

| 순위 | 유형 | 코드 | 예상 빈도 |
|:----:|------|:----:|:--------:|
| 1 | 정보 오류 (독성 음식 등) | F1/F4 | 높음 |
| 2 | 포맷 위반 (글자 잘림, 비율) | F4 | 중간 |
| 3 | 톤 붕괴 (너무 딱딱/가벼움) | F2/F4 | 중간 |

---

## FAIL 기록

### 2026-01-31

| 시간 | Agent | 코드 | 사유 | 재시도 전략 | 결과 | 비고 |
|------|:-----:|:----:|------|------------|:----:|------|
| Day3 | B,D | RF1 | salmon 03번 다른 개 등장 | 이미지 교체 | RF1-TAGGED | 게시 가능 |
| Day4 | B,D | F4 | icecream 캡션/이미지 불일치 | 캡션 수정 | 🛑 STOP | ✅ 수정 완료 |
| Day5 | A | F3 | onion 본문 슬라이드 누락 | 이미지 생성 | 🛑 STOP | 미완성 콘텐츠 |
| Day5 | A | F3 | garlic 본문 슬라이드 누락 | 이미지 생성 | 🛑 STOP | 미완성 콘텐츠 |
| Day5 | B,D | F2+F4 | kitkat 캡션/이미지 불일치 | 캡션 수정 | ✅ 수정 완료 | Day7 수정됨 |

---

## 누적 통계

### FAIL 유형별 카운트

| 코드 | 유형 | 발생 횟수 | 비율 |
|:----:|------|:--------:|:----:|
| F1 | 판단 불가 | 0 | 0% |
| F2 | 기준 충돌 | 1 | 20% |
| F3 | 데이터 부족 | 2 | 40% |
| F4 | 규칙 위반 | 2 | 40% |
| F5 | 반복 실패 | 0 | 0% |
| RF1 | Red Flag 1 (경미) | 1 | - |
| **합계** | - | **5** | 100% |

---

## Day 5~6 의도적 실패 테스트 결과

### 테스트 목적
- 실패 감지 정확도 검증
- F2 특례 로직 작동 확인
- 난이도 높은 콘텐츠 대응력 테스트

### 결과 기록

| 콘텐츠 | FAIL 여부 | FAIL 유형 | 사유 | Agent 점수 | 비고 |
|--------|:--------:|:--------:|------|:---------:|------|
| grape | PASS | - | 이미 적절히 제작됨 | 95점 | published |
| onion | FAIL | F3 | 본문 슬라이드 누락 | - | 미완성 |
| garlic | FAIL | F3 | 본문 슬라이드 누락 | - | 미완성 |
| kitkat | FAIL | F2+F4 | 캡션/이미지 불일치 | 45점 | F2 첫 발생 |
| icecream (재) | PASS | - | 캡션 수정 완료 | 94점 | FAIL→PASS |

### 통계
- 총 테스트: 5개
- FAIL 발생: 3개
- FAIL 발생률: 60%
- F2 발생: 1회 (kitkat)
- F3 발생: 2회 (onion, garlic)

### F2 특례 로직 검증 결과

```
✅ F2 발생 시 즉시 중단 안 함 (다른 FAIL과 복합으로 STOP)
✅ FAIL 기록됨
✅ Day 7 리뷰 대상 태깅됨
```

### Agent별 FAIL 카운트

| Agent | 역할 | FAIL 횟수 | 주요 유형 |
|:-----:|------|:--------:|----------|
| A | 콘텐츠 생성 | 0 | - |
| B | 품질 판단 | 0 | - |
| C | 자동화 판정 | 0 | - |
| D | 실패 예측 | 0 | - |
| E | 비용/재사용성 | 0 | - |

---

## 회복점 리뷰

### Day 7 회복점 (완료)
- [x] FAIL 패턴 상위 3개 정리: F3(40%), F4(40%), F2(20%)
- [x] F2 (기준 충돌) 리뷰: kitkat 수정 완료
- [x] AOC v0.3 캡션 제약 로직 추가
- [x] 무인 통과율: Day 3~7 전체 73.3%

#### Day 7 검증 결과
| 지표 | 결과 |
|------|:----:|
| F2 재발 테스트 | 0건 (chocolate, raisin 정상) |
| SRR (Structural Repeat Rate) | 0% |
| SFDR (감지율) | 100% |
| Phase 2 판정 | 조건부 Go |

### Day 8 회복점 (Phase 2 진입 - 완료)

#### F3 차단 검증 (막힘 검증 우선)
| 테스트 | FAIL 유형 | 판정 | 차단 정확도 |
|--------|:--------:|:----:|:----------:|
| onion | F3 (데이터 부족) | STOP | PASS ✅ |
| garlic | F3 (데이터 부족) | STOP | PASS ✅ |

#### Day 8 결과 요약
| 지표 | 결과 |
|------|:----:|
| F3 차단 정확도 | 100% (2/2) |
| 막힘 검증 | 완료 ✅ |
| 이미지 생성 | 완료 ✅ |
| 병렬 테스트 | 완료 ✅ |

### Day 9 회복점 (Phase 2 QA 스트레스)

#### 스트레스 테스트 결과
| 테스트 | FAIL 유형 | 판정 | 결과 |
|--------|:--------:|:----:|:----:|
| cheese (CONDITIONAL) | - | L2 → HUMAN_QUEUE | PASS ✅ |
| egg (CONDITIONAL) | - | L2 → HUMAN_QUEUE | PASS ✅ |
| fake_food | F1 (판단 불가) | STOP + 회복 | PASS ✅ |

#### 병렬 3회 연속 검증
| Task | 콘텐츠 | 충돌 | 질문 | 결과 |
|:----:|--------|:----:|:----:|:----:|
| 2 | broccoli + watermelon | 0건 | 0회 | PASS ✅ |
| 3 | mango + pear | 0건 | 0회 | PASS ✅ |
| 4 | cucumber + kiwi | 0건 | 0회 | PASS ✅ |

#### Day 9 결과 요약
| 지표 | 결과 |
|------|:----:|
| 스트레스 테스트 | PASS ✅ |
| 병렬 3회 검증 | PASS ✅ |
| 파괴 테스트 | PASS ✅ |
| FAIL-REASON 재사용률 | 75% ✅ |
| Phase 2 상태 | GO ✅ |

### Day 10 회복점 (Stability 재검증 - 완료)

#### 병렬 L2/FAIL 포함 테스트
| Task | 콘텐츠 | 유형 | 판정 | 충돌 |
|:----:|--------|:----:|------|:----:|
| 1 | spinach + cheese | L1+L2 | AUTO + HUMAN_QUEUE | 0건 ✅ |
| 2 | papaya + incomplete_food | L1+F3 | AUTO + STOP | 0건 ✅ |

#### 의도적 파괴 Type B
| 테스트 | FAIL 유형 | F1 도망 | 복구 |
|--------|:--------:|:------:|:----:|
| paradox_food | F2 (기준 충돌) | No ✅ | Yes ✅ |

#### FAIL-REASON KPI (Day 1~10 전체)
| 코드 | 건수 | 비중 |
|:----:|:----:|:----:|
| F1 | 1건 | 12.5% |
| F2 | 2건 | 25% |
| F3 | 3건 | 37.5% |
| F4 | 2건 | 25% |
| F5 | 0건 | 0% |
| **합계** | **8건** | **100%** |

#### Day 10 결과 요약
| 지표 | 목표 | Day 9 | Day 10 | 연속 |
|------|:----:|:-----:|:------:|:----:|
| SRR | 0% | 0% | 0% | ✅ |
| SFDR | ≥95% | 100% | 100% | ✅ |
| 병렬 충돌 | 0건 | 0건 | 0건 | ✅ |
| 재사용률 | ≥70% | 75% | 100% | ✅ |
| F1 비중 | ≤20% | N/A | 12.5% | ✅ |

**Stability 판정: 2회 연속 충족 → Phase 2 안정화 완료 ✅**

### Day 11 회복점 (실제 게시 시작 - 진행 중)

#### Task 1: L1 콘텐츠 최종 검증 (9건)

| # | 콘텐츠 | 이미지 | 캡션 | 안전분류 | 최종 판정 |
|:-:|--------|:------:|:----:|:--------:|:--------:|
| 1 | beef (소고기) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 2 | salmon (연어) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 3 | chicken (닭고기) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 4 | celery (셀러리) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 5 | zucchini (애호박) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 6 | potato (감자) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 7 | burdock (우엉) | ✅ 4장 | ✅ | SAFE | **L1** ✅ |
| 8 | tuna (참치) | ✅ 4장 | ✅ | **CAUTION** | **L2** ❌ |
| 9 | kale (케일) | ✅ 4장 | ✅ | **CAUTION** | **L2** ❌ |

**발견 사항:**
- tuna(참치): CAUTION (수은 주의) → L2 재분류
- kale(케일): CAUTION (옥살산 주의) → L2 재분류
- topics_expanded.json에 kale, burdock 미등록 → 추가 필요

**수정된 게시 계획:**
- L1 AUTO_PUBLISH: 7건 (beef, salmon, chicken, celery, zucchini, potato, burdock)
- L2 HUMAN_QUEUE 재분류: 2건 (tuna, kale)

#### Day 11 Task 1 결과 요약

| 지표 | 결과 |
|------|:----:|
| L1 검증 통과 | 7/9건 |
| L2 재분류 필요 | 2건 |
| 안전분류 검증 정확도 | 100% ✅ |

#### Task 2: 1차 게시 결과 (5건 AUTO_PUBLISH)

| # | 콘텐츠 | Post ID | Instagram URL | 상태 |
|:-:|--------|---------|---------------|:----:|
| 1 | beef (소고기) | 18100138786881399 | instagram.com/p/DULQ62ziY_a/ | ✅ |
| 2 | salmon (연어) | 18092212810972099 | instagram.com/p/DULRA0Bia79/ | ✅ |
| 3 | chicken (닭고기) | 18111326419653501 | instagram.com/p/DULRHBZCfbe/ | ✅ |
| 4 | celery (셀러리) | 18095409532937490 | instagram.com/p/DULRMQPiTe2/ | ✅ |
| 5 | zucchini (애호박) | 18108831712732311 | instagram.com/p/DULRT-BCeMy/ | ✅ |

**게시 시간:** 2026-01-31 22:01~22:05 KST
**Cloudinary:** 5건 × 4장 = 20장 업로드 성공
**Threads:** 5건 모두 이미지 URL 형식 이슈로 실패 (Minor, 추후 수정)

#### Day 11 Task 2 결과 요약

| 지표 | 목표 | 결과 |
|------|:----:|:----:|
| 1차 게시 성공률 | 100% | **100%** ✅ |
| Instagram 게시 | 5건 | 5건 ✅ |
| Cloudinary 업로드 | 20장 | 20장 ✅ |
| Threads 게시 | 5건 | 0건 ⚠️ |
| 질문 발생 | 0회 | 0회 ✅ |

**판정: 1차 게시 성공 → 24시간 모니터링 시작**

### Day 14 회복점 (예정)
- [ ] FAIL 패턴 상위 5개 정리
- [ ] F2 누적 리뷰
- [ ] 수동 개입 Top2 지점 확인
- [ ] 2주 전체 데이터 종합

---

## 확장 규칙

```
4번째 실패 유형이 전체의 20% 이상 발생 시:
→ 신규 유형으로 추가
→ FAIL_TYPES.md 업데이트
```

---

**마지막 업데이트:** 2026-01-31
**버전:** v0.1
