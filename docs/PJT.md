# PJT v0.1 (Parallel Judgment Template)

> **버전:** v0.1
> **작성일:** 2026-01-31
> **기준 문서:** Project_Sunshine_Execution_Guidebook_v1.1.md

---

## 핵심 원칙

> 병렬 = "같은 일을 빨리" ❌
> 병렬 = "다른 관점의 판단을 동시에" ✅

---

## 병렬 실행 구조

```
[입력: 주제 데이터]
       │
       ▼
┌─────────────────────────────────────────┐
│     Agent A: 콘텐츠 생성 (순차 필수)      │
└─────────────────────────────────────────┘
       │
       ▼
   [Agent A 결과물]
       │
       ├─────────────────────────────────────┐
       │                                     │
       ▼                                     ▼
┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│  Agent B    │ │  Agent C    │ │  Agent D    │ │  Agent E    │
│  품질 판단   │ │ 자동화 판정  │ │ 실패 예측   │ │ 비용/재사용  │
└─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘
       │              │              │              │
       └──────────────┴──────────────┴──────────────┘
                      │
                      ▼
            ┌─────────────────┐
            │    합의 노드     │
            │   최종 판정     │
            └─────────────────┘
                      │
         ┌────────────┼────────────┐
         │            │            │
         ▼            ▼            ▼
    [ALL PASS]   [1개 FAIL]   [2개+ FAIL]
         │            │            │
         ▼            ▼            ▼
    자동 게시    Agent A     자동 중단
                 재시도      + PD 알림
```

---

## 병렬 허용/금지 조건

### ✅ 병렬 허용

| 조건 | 설명 |
|------|------|
| 입력 동일 | 모든 Agent가 같은 콘텐츠를 받음 |
| 출력 독립 | 각 Agent의 판단이 서로 영향 없음 |
| 실패 비전파 | 한 Agent FAIL이 다른 Agent에 영향 없음 |

**허용 대상:**
- Agent B, C, D, E 동시 실행

### ❌ 병렬 금지 (순차 필수)

| 항목 | 이유 |
|------|------|
| Agent A 생성 → B~E 판단 | 생성 완료 후 판단 가능 |
| 합의 노드 → 최종 판정 | 모든 판단 수렴 필요 |
| 재시도 → 재판단 | 순차적 검증 필요 |

---

## 합의 노드 판정 규칙

### Phase 1~2 (초기) 자동 게시 조건

```
Agent B: 평균 70점 이상 + 전항목 60점 이상
Agent C: PASS + 사람 개입 ≤ 1개
Agent D: Red Flag ≤ 1개 (RF1-TAGGED 태깅)
Agent E: 비용 일일 상한 ($3) 이내
```

### Phase 3+ (정규) 자동 게시 조건

```
Agent B: 평균 80점 이상 + 전항목 70점 이상
Agent C: PASS + 사람 개입 0개
Agent D: Red Flag 0개
Agent E: 비용 일일 상한 이내
```

### 판정 흐름

| 결과 | 동작 |
|------|------|
| ALL PASS | 사람 확인 없이 자동 게시 |
| 1개 FAIL | Agent A 재시도 (1회만) |
| 2개+ FAIL | 자동 중단 + PD님 알림 |
| Agent D Red Flag 2개+ | 즉시 중단 |

---

## RF1-TAGGED 처리

> Red Flag 1개인 상태로 게시된 콘텐츠

```
1. 게시 로그에 "RF1-TAGGED" 자동 태깅
2. 게시는 진행 (Phase 1~2 완화 정책)
3. Day 7, 14 회복점에서 필수 리뷰
4. 동일 Red Flag 3회 누적 시 AOC 업데이트
```

---

## 병렬 확장 조건

### 수치 조건 (데이터 기반)

| 현재 → 목표 | 조건 |
|-------------|------|
| 1 → 2 병렬 | 최근 10개 중 L3+L4 사고 ≤ 1회 |
| 2 → 5 병렬 | 최근 20개 중 L3+L4 사고 ≤ 2회 |

### 사고 레벨 정의

| 레벨 | 정의 | 병렬 영향 |
|------|------|----------|
| L1 | 톤/뉘앙스 수정 | 없음 |
| L2 | 구조 수정 필요 | 없음 |
| L3 | 재생성 필요 | 카운트 +1 |
| L4 | 폐기 | 카운트 +1 |

---

## 출력 형식

### 병렬 판단 결과

```json
{
  "parallel_judgment": {
    "agent_b": {"result": "PASS/FAIL", "score": 0-100},
    "agent_c": {"result": "PASS/FAIL", "intervention_count": 0-3},
    "agent_d": {"result": "PASS/FAIL", "red_flag_count": 0-5},
    "agent_e": {"result": "PASS/FAIL", "cost": "$X.XX"}
  },
  "consensus": {
    "pass_count": 0-4,
    "fail_count": 0-4,
    "decision": "AUTO_PUBLISH / RETRY / STOP",
    "rf1_tagged": true/false
  }
}
```

---

## 동시 최대 Task 수

```
Phase 1: 2 Task (Agent B + D)
Phase 2: 5 Task (Agent B + C + D + E + 합의노드)
Phase 3+: 5 Task (고정)
```

---

**마지막 업데이트:** 2026-01-31
**버전:** v0.1
