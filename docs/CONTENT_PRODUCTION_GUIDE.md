# 콘텐츠 제작 필수 가이드 (v1.0)

> **⚠️ 이 가이드는 반드시 준수해야 합니다. 위반 시 재작업 필수.**
>
> 최종 수정: 2026-01-29
> 작성: 김부장

---

## 📋 작업 전 필수 체크리스트

작업 시작 전 아래 항목을 **반드시** 확인하세요.

```
□ 1. 이 가이드 문서를 읽었는가?
□ 2. 표지 이미지 위치를 확인했는가? (000_cover/02_ready/)
□ 3. 표지 이미지 배경을 참조 이미지로 저장했는가?
□ 4. PPT 템플릿 스펙을 확인했는가? (Arial 54px)
```

---

## 1. 이미지 생성 규칙

### 1.1 API 모델 (필수)

| 항목 | 값 | 비고 |
|------|-----|------|
| **모델 ID** | `fal-ai/flux-2-pro` | ⚠️ 필수! |
| ❌ 금지 | `fal-ai/flux-pro` | 구버전 |
| ❌ 금지 | `fal-ai/flux-pro/v1.1` | 구버전 |

```python
# 올바른 예시
result = fal_client.subscribe(
    "fal-ai/flux-2-pro",  # ✅ 정확한 모델 ID
    arguments={...}
)
```

### 1.2 배경 일관성 (필수)

**원칙: 본문 이미지 배경 = 표지 이미지 배경**

모든 표지는 동일한 배경(따뜻한 거실)으로 제작됩니다.
본문 이미지 생성 시 반드시 표지 배경을 참조해야 합니다.

**표준 배경 요소:**
```
- 우드톤 실링팬
- 야경이 보이는 창문
- 몬스테라 & 야자 화분
- 플로어 스탠드 조명
- 미스터마리아 브라운 무드등
- 베이지 소파
- 원목 테이블
- 간접 LED 조명 (천장)
```

**프롬프트 템플릿:**
```
warm cozy living room with wooden ceiling fan,
night city view through large window,
monstera and palm plants,
floor lamp with white shade,
cute bear-shaped mood lamp (Mr. Maria Brown),
beige sofa in background,
wooden dining table,
warm ambient lighting with indirect LED ceiling lights
```

### 1.3 생성 순서

```
1. 표지 이미지 확인 (000_cover/02_ready/)
2. 표지 배경 요소 추출
3. 본문 이미지 프롬프트에 배경 요소 포함
4. flux-2-pro로 생성
5. 배경 일치 여부 검수
```

---

## 2. 텍스트 오버레이 규칙

### 2.1 표지 텍스트 - Python PIL 사용 (규칙 v2 - 2026-02-03 확정)

> ⚠️ **PPT 템플릿 사용 금지! Python PIL 스크립트 사용**

**스크립트 사용법:**
```bash
python3 services/scripts/create_cover_text.py <topic_en> <topic_kr> <cover_number>

# 예시
python3 services/scripts/create_cover_text.py duck 오리고기 169
```

**표지 텍스트 스펙 v2:**
| 항목 | 값 |
|------|-----|
| 폰트 | Arial Black |
| 크기 | 114px |
| 위치 | 상단 18% (25% 이내) |
| 색상 | #FFFFFF (흰색) |
| 효과 | 드롭 섀도우 (4px 오프셋) |

**파일명 규칙 (필수):**
- 표지: `{영문명}_00.png`
- 본문: `{영문명}_01.png`, `{영문명}_02.png`, `{영문명}_03.png`

**❌ 금지:** PPT 템플릿 (폐지됨)
**✅ 필수:** `create_cover_text.py` 스크립트 사용

### 2.2 본문 텍스트 스펙 (안전도 기반 색상 v1.0)

> **📌 참조:** `RULES_v1.0.md`, `config/settings/food_safety.json`

| 항목 | 값 |
|------|-----|
| 폰트 | Noto Sans KR (또는 Pretendard) |
| 제목 사이즈 | 72px |
| 부제목 사이즈 | 36px |
| 그라데이션 | 하단 50% |

#### ⚠️ 제목 색상 (안전도 기반 - 필수!)

| 안전도 | 색상 | HEX | 예시 음식 |
|--------|------|-----|-----------|
| **SAFE** | 초록 | `#4CAF50` | 오리, 삶은달걀, 시금치, 닭고기 |
| **CAUTION** | 노랑 | `#FFD93D` | 새우, 삼겹살, 아보카도 |
| **DANGER** | 빨강 | `#FF6B6B` | 포도, 초콜릿, 양파 |

**확인 방법:**
```bash
# 음식 안전도 확인
cat config/settings/food_safety.json | grep -A 10 '"safe"'
```

**기준 콘텐츠:**
- SAFE: `032_boiled_egg_삶은달걀`, `026_spinach_시금치`
- CAUTION: `140_shrimp_새우`
- DANGER: `060_grape_포도`

### 2.3 CTA 텍스트 스펙

| 항목 | 값 |
|------|-----|
| 제목 색상 | #FFD93D (노란색) |
| 나머지 | 본문과 동일 |

### 2.4 🚨 CTA 이미지 규칙 (2026-01-30 추가)

> **⚠️ CTA 슬라이드는 반드시 실제 햇살이 사진 사용!**

| 항목 | 값 |
|------|-----|
| **이미지 소스** | `content/images/sunshine/cta_source/best_cta/` |
| **AI 생성** | ❌ **절대 금지** |
| **형식** | JPG (원본 사진) |

```
❌ 금지: CTA에 AI 생성 이미지 사용
✅ 필수: best_cta 폴더에서 실제 햇살이 사진 선택
```

**자동 제작 스크립트에서 강제 적용됨:**
```python
# auto_content_producer.py
CTA_SOURCE_DIR = ROOT / "content/images/sunshine/cta_source/best_cta"

# CTA는 항상 실제 사진에서 랜덤 선택
cta_photo = random.choice(list(CTA_SOURCE_DIR.glob("*.jpg")))
```

---

## 3. 슬라이드 구조 (v6 표준 - 4장)

| 번호 | 타입 | 역할 | 텍스트 |
|:----:|------|------|--------|
| 00 | cover | 표지 | 영문 제목 (RICE, BANANA 등) |
| 01 | content_bottom | 결론+효능 | 한글 제목 + 부제목 |
| 02 | content_bottom | 주의+급여량 | 한글 제목 + 부제목 |
| 03 | cta | CTA | 노란색 제목 + 급여량 |

---

## 4. 파일 구조

```
content/images/
├── 000_cover/
│   ├── 01_published/     # 게시 완료된 커버
│   └── 02_ready/         # 사용 대기 커버 ← 여기서 가져옴
│       └── cover_79_흰쌀밥_rice.png
│
└── 018_흰쌀밥/
    ├── rice_01.png       # 본문 원본
    ├── rice_02.png
    ├── rice_03.png
    ├── _final/           # 텍스트 오버레이 완료
    │   ├── rice_00.png   # 표지 (커버에서 가져와서 텍스트 입힘)
    │   ├── rice_01.png
    │   ├── rice_02.png
    │   └── rice_03.png
    └── archive/          # 이전 버전 백업
```

---

## 5. 작업별 담당자

| 작업 | 담당 | 검수 |
|------|------|------|
| 표지 이미지 | **PD님 직접 제작** | - |
| 본문 이미지 | 이작가 | 김감독 |
| 텍스트 오버레이 | 박편집 | 김감독 |
| 파일 정리/업로드 | 김대리 | 김감독 |

---

## 6. 금지 사항

```
❌ 표지 이미지 AI 생성 (PD님이 직접 제작)
❌ flux-pro, flux-pro/v1.1 사용 (반드시 flux-2-pro)
❌ Arial 54px 외 다른 표지 폰트/사이즈 사용
❌ 표지 배경과 다른 배경으로 본문 생성
❌ PPT 템플릿 스펙 무시
```

---

## 7. 검수 체크리스트

### 이미지 생성 검수
```
□ flux-2-pro 모델 사용 확인
□ 표지 배경과 본문 배경 일치 확인
□ 브라운 무드등 존재 확인
□ 실링팬 존재 확인
□ 야경 창문 존재 확인
```

### 텍스트 오버레이 검수
```
□ 표지: Arial 54px 확인
□ 표지: 위치 상단 18% 확인
□ 본문: 그라데이션 적용 확인
□ CTA: 노란색 제목 확인
```

---

## 8. 제작 워크플로우 (전체 순서)

### 8.1 사전 준비
```
1. 000_cover/02_ready/에서 표지 이미지 확인
2. 표지 배경 요소 메모 (실링팬, 야경, 무드등 등)
3. config/settings/{음식}_text.json 텍스트 설정 확인
```

### 8.2 본문 이미지 생성 (이작가)
```
1. 표지 배경 프롬프트를 본문 프롬프트에 포함
2. fal-ai/flux-2-pro로 생성 (1080x1080)
3. 슬라이드별 앵글 다양성 확보 (정면/측면/블러)
```

### 8.3 텍스트 오버레이 (박편집)
```
1. 표지: Arial 114px, 상단 25%, 언더라인 없음
2. 본문: Pretendard, 하단 그라데이션
3. CTA: 노란색 제목 (#FFD93D)
```

### 8.4 내부 검수 (김감독)
```
□ 배경 일관성 확인 (표지 = 본문)
□ 폰트/사이즈 스펙 확인
□ 앵글 다양성 확인
□ 금지 포즈 확인 (먹기/핥기)
```

### 8.5 폴더 정리 (김대리)
```
최종 구조:
{번호}_{음식명}/
├── _final/        ← 게시용 4장만
│   ├── {음식}_00.png
│   ├── {음식}_01.png
│   ├── {음식}_02.png
│   └── {음식}_03.png
└── archive/       ← 작업 파일 전부
    ├── 원본 이미지
    ├── json 설정
    └── 이전 버전
```

### 8.6 게시 (김대리)
```
1. Instagram Graph API로 캐러셀 게시
2. 표지 이미지 → 000_cover/01_published/ 이동
3. publishing_history.json 업데이트
```

---

## 9. 내부 검수 프로세스

> **원칙:** PD님께 보여드리기 전 반드시 내부 검수 완료

### 검수 체인
```
이작가 → 김감독(이미지) → 박편집 → 김감독(오버레이) → 김부장(최종) → PD
```

### 김감독 체크리스트 (G2: 이미지)
| # | 항목 | 기준 |
|---|------|------|
| 1 | API 모델 | flux-2-pro 사용 |
| 2 | 배경 일치 | 표지 배경 = 본문 배경 |
| 3 | 앵글 다양성 | 최소 3종 |
| 4 | 금지 포즈 | 먹기/핥기 없음 |
| 5 | 해상도 | 1080x1080 |

### 김감독 체크리스트 (G3: 오버레이)
| # | 항목 | 기준 |
|---|------|------|
| 1 | 표지 폰트 | Arial 114px |
| 2 | 표지 위치 | 상단 25% |
| 3 | 언더라인 | 없음 |
| 4 | 본문 그라데이션 | 하단 50% |
| 5 | CTA 색상 | 노란색 (#FFD93D) |

### 김부장 최종 검수
```
□ 4장 전체 일관성
□ 브랜드 톤 유지
□ 게시 가능 품질
```

---

## 변경 이력

| 날짜 | 내용 | 작성자 |
|------|------|--------|
| 2026-01-29 | 최초 작성 | 김부장 |
| 2026-01-29 | 워크플로우/검수 프로세스 추가 | 김부장 |

